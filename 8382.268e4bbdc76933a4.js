"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8382],{8382:(no,Y,h)=>{h.r(Y),h.d(Y,{FillFormPageModule:()=>io});var p=h(6895),r=h(4006),l=h(8058),k=h(3317),u=h(655),W=h(5838),e=h(8256),ee=h(727);class te extends ee.w0{constructor(a,t){super()}schedule(a,t=0){return this}}const U={setInterval(n,a,...t){const{delegate:i}=U;return i?.setInterval?i.setInterval(n,a,...t):setInterval(n,a,...t)},clearInterval(n){const{delegate:a}=U;return(a?.clearInterval||clearInterval)(n)},delegate:void 0};var ie=h(8737),oe=h(6063);class P{constructor(a,t=P.now){this.schedulerActionCtor=a,this.now=t}schedule(a,t=0,i){return new this.schedulerActionCtor(this,a).schedule(i,t)}}P.now=oe.l.now;const se=new class ae extends P{constructor(a,t=P.now){super(a,t),this.actions=[],this._active=!1}flush(a){const{actions:t}=this;if(this._active)return void t.push(a);let i;this._active=!0;do{if(i=a.execute(a.state,a.delay))break}while(a=t.shift());if(this._active=!1,i){for(;a=t.shift();)a.unsubscribe();throw i}}}(class ne extends te{constructor(a,t){super(a,t),this.scheduler=a,this.work=t,this.pending=!1}schedule(a,t=0){var i;if(this.closed)return this;this.state=a;const o=this.id,s=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(s,o,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(a,t,i=0){return U.setInterval(a.flush.bind(a,this),i)}recycleAsyncId(a,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&U.clearInterval(t)}execute(a,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(a,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,t){let o,i=!1;try{this.work(a)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:a,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(i,this),null!=a&&(this.id=this.recycleAsyncId(t,a,null)),this.delay=null,super.unsubscribe()}}});var re=h(4482),le=h(5403);function C(n,a=se){return(0,re.e)((t,i)=>{let o=null,s=null,c=null;const d=()=>{if(o){o.unsubscribe(),o=null;const _=s;s=null,i.next(_)}};function m(){const _=c+n,g=a.now();if(g<_)return o=this.schedule(void 0,_-g),void i.add(o);d()}t.subscribe((0,le.x)(i,_=>{s=_,c=a.now(),o||(o=a.schedule(m,n),i.add(o))},()=>{d(),i.complete()},void 0,()=>{s=o=null}))})}function ce(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function pe(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function de(n,a){if(1&n&&(e.ynx(0),e.YNc(1,pe,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.addressForm.get("address").hasError(t.type)&&(i.addressForm.get("address").dirty||i.addressForm.get("address").touched))}}function ue(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function _e(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function me(n,a){if(1&n&&(e.ynx(0),e.YNc(1,_e,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.addressForm.get("city").hasError(t.type)&&(i.addressForm.get("city").dirty||i.addressForm.get("city").touched))}}function ge(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function he(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function fe(n,a){if(1&n&&(e.ynx(0),e.YNc(1,he,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.addressForm.get("state").hasError(t.type)&&(i.addressForm.get("state").dirty||i.addressForm.get("state").touched))}}function ve(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function xe(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function be(n,a){if(1&n&&(e.ynx(0),e.YNc(1,xe,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.addressForm.get("pincode").hasError(t.type)&&(i.addressForm.get("pincode").dirty||i.addressForm.get("pincode").touched))}}function Fe(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function ye(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Ze(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ye,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.addressForm.get("country").hasError(t.type)&&(i.addressForm.get("country").dirty||i.addressForm.get("country").touched))}}let D=(()=>{class n{constructor(){this.addressEvent=new e.vpe,this.attribute_lang={},this.address_status=!1,this.validationMessages={address:[{type:"required",message:"Address is required"}],city:[{type:"required",message:"City is required"}],state:[{type:"required",message:"State is required"}],pincode:[{type:"required",message:"Pincode is required"}],country:[{type:"required",message:"Country is required"}]}}ngOnInit(){var t,i,o,s,c,d,m;this.attribute_lang=null===(t=this.item.value)||void 0===t?void 0:t.attribute_lang,console.log(null===(i=this.item)||void 0===i?void 0:i.value),this.addressForm=new r.cw({address:new r.NI(null===(o=this.item.value.value)||void 0===o?void 0:o.address,this.item.value.is_required?[r.kI.required]:[]),city:new r.NI(null===(s=this.item.value.value)||void 0===s?void 0:s.city,this.item.value.is_required?[r.kI.required]:[]),state:new r.NI(null===(c=this.item.value.value)||void 0===c?void 0:c.state,this.item.value.is_required?[r.kI.required]:[]),pincode:new r.NI(null===(d=this.item.value.value)||void 0===d?void 0:d.pincode,this.item.value.is_required?[r.kI.required]:[]),country:new r.NI(null===(m=this.item.value.value)||void 0===m?void 0:m.country,this.item.value.is_required?[r.kI.required]:[])}),this.address_status=this.item.value.is_locked,this.addressForm.valueChanges.pipe(C(500)).subscribe(_=>{this.addressEvent.emit(_)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-address"]],inputs:{item:"item",isRequired:"isRequired"},outputs:{addressEvent:"addressEvent"},decls:33,vars:17,consts:[[3,"formGroup"],[3,"disabled"],[1,"form-group"],["class","compulsory",4,"ngIf"],["formControlName","address","rows","5","placeholder","Type something here"],[4,"ngFor","ngForOf"],["type","text","formControlName","city"],["type","text","formControlName","state"],["type","text","formControlName","pincode"],["type","text","formControlName","country"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"div",2)(4,"label"),e._uU(5),e.YNc(6,ce,2,0,"span",3),e.qZA(),e._UZ(7,"ion-textarea",4),e.YNc(8,de,2,1,"ng-container",5),e.qZA(),e.TgZ(9,"div",2)(10,"label"),e._uU(11),e.YNc(12,ue,2,0,"span",3),e.qZA(),e._UZ(13,"ion-input",6),e.YNc(14,me,2,1,"ng-container",5),e.qZA(),e.TgZ(15,"div",2)(16,"label"),e._uU(17),e.YNc(18,ge,2,0,"span",3),e.qZA(),e._UZ(19,"ion-input",7),e.YNc(20,fe,2,1,"ng-container",5),e.qZA(),e.TgZ(21,"div",2)(22,"label"),e._uU(23),e.YNc(24,ve,2,0,"span",3),e.qZA(),e._UZ(25,"ion-input",8),e.YNc(26,be,2,1,"ng-container",5),e.qZA(),e.TgZ(27,"div",2)(28,"label"),e._uU(29),e.YNc(30,Fe,2,0,"span",3),e.qZA(),e._UZ(31,"ion-input",9),e.YNc(32,Ze,2,1,"ng-container",5),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.addressForm),e.xp6(1),e.Q6J("disabled",i.address_status),e.xp6(4),e.hij("",null==i.attribute_lang?null:i.attribute_lang.address," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.address),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.city," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.city),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.state," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.state),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.pincode," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.pincode),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.country," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.country))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.PM,l.FN,l.pK,l.g2,l.j9,r.sg,r.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}"]}),n})();var F=h(7391);let N=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-content-uploading"]],decls:7,vars:2,consts:[[1,"ion-padding","my-popup"],[2,"text-align","center"],["src","assets/images/loader2.gif","width","300px"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e._UZ(4,"img",2),e.qZA(),e.TgZ(5,"p",1),e._uU(6),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(i.heading),e.xp6(4),e.Oqu(i.content))},dependencies:[l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #EEEEEE !important}"]}),n})();function Te(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1,"Recheck your photo before submitting."),e.qZA())}function Ie(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1,"Recheck your pdf before submitting."),e.qZA())}function Ce(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgPath,e.LSH)}}function ke(n,a){1&n&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA())}let w=(()=>{class n{constructor(t){this.modalController=t,this.isModalOpen=!1}ngOnInit(){}setOpen(t){this.isModalOpen=t}uploadExit(){this.modalController.dismiss("start_upload")}exitScreen(){this.modalController.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-image-popup"]],decls:7,vars:4,consts:[[1,"ion-padding"],[4,"ngIf"],["style","text-align: center;",4,"ngIf"],["type","button","ion-button","","size","full",3,"click"],[1,"selected-image",3,"src"],[2,"text-align","center"],["src","assets/images/pdf_icon.jpg","width","300px"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0),e.YNc(1,Te,2,0,"p",1),e.YNc(2,Ie,2,0,"p",1),e.YNc(3,Ce,2,1,"div",1),e.YNc(4,ke,2,0,"div",2),e.TgZ(5,"ion-button",3),e.NdJ("click",function(){return i.uploadExit()}),e._uU(6,"Upload"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","image"==i.type),e.xp6(1),e.Q6J("ngIf","pdf"==i.type),e.xp6(1),e.Q6J("ngIf","image"==i.type),e.xp6(1),e.Q6J("ngIf","pdf"==i.type))},dependencies:[p.O5,l.YG,l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #fff !important}.selected-image[_ngcontent-%COMP%]{width:100%;height:350px;object-fit:contain;border-radius:20px;background-color:#ddd}"]}),n})();var q=h(1692),y=h(1270);const Pe=["fileInput"];function we(n,a){1&n&&(e.TgZ(0,"ion-item",14)(1,"p"),e._uU(2,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA()())}function qe(n,a){1&n&&(e.TgZ(0,"span",15),e._uU(1,"*"),e.qZA())}function Ae(n,a){1&n&&(e.TgZ(0,"div",16),e._UZ(1,"ion-icon",17),e.TgZ(2,"div")(3,"span",18),e._uU(4,"Choose File"),e.qZA()()())}function Ue(n,a){if(1&n&&e._UZ(0,"img",19),2&n){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function Ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"img",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFile())}),e.qZA()}}function Me(n,a){if(1&n&&(e.TgZ(0,"div",21)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function Je(n,a){if(1&n&&(e.TgZ(0,"div",23)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Ee(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Je,3,1,"div",22),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.fileUploadForm.get("value").hasError(t.type)&&(i.fileUploadForm.get("value").dirty||i.fileUploadForm.get("value").touched))}}let O=(()=>{class n{constructor(t,i,o){this.globalService=t,this.formApiService=i,this.modalController=o,this.fileUploadEvent=new e.vpe,this.uploadSubmit=!1,this.uploadedID=!1,this.attribute_lang={},this.uploadPDFFileName="",this.file_status=!1,this.document_status="",this.validationMessages={value:[{type:"required",message:"File is required"}]}}ngOnInit(){var t,i,o,s;this.attribute_lang=this.item.value.attribute_lang,!(null===(i=null===(t=this.item)||void 0===t?void 0:t.value)||void 0===i)&&i.value&&(""!=this.item.value.valueh&&(this.uploadPDFFileName=this.item.value.value.split("/").pop()),this.imgPath="pdf"==this.item.value.value.split(".").pop()?"assets/images/pdf_icon.jpg":null===(s=null===(o=this.item)||void 0===o?void 0:o.value)||void 0===s?void 0:s.value),this.file_status=this.item.value.is_locked,this.fileUploadForm=new r.cw({value:new r.NI(this.item.value.value,this.item.value.is_required?[r.kI.required]:[])}),this.globalService.fileUploadEvent.subscribe(c=>{c?.forEach(d=>{this.document_status=d.status})})}takePhoto(){return(0,u.mG)(this,void 0,void 0,function*(){this.fileInput.nativeElement.click()})}uploadPhoto(t){const i=t.target.files[0];if(this.extension=i.type,this.uploadPDFFileName=i.name,i.size>=F.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=s=>{let c=s.target.result;this.imgPath=c,this.openImageModal(c),"application/pdf"==this.extension&&(this.imgPath="assets/images/pdf_icon.jpg")},o.readAsDataURL(i),this.selectedFile=i}}openImageModal(t){return(0,u.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"application/pdf"==this.extension?"pdf":"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(i=>{"start_upload"==i.data&&this.uploadDoc()})})}uploadDoc(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type","file"),t.append("name","file"),t.append("file",this.selectedFile),this.formApiService.uploadDocument(t).subscribe(i=>{var o;this.contentUploadModal.dismiss(),i.success&&(this.uploadedID=!0,this.fileUploadForm.get("value").setValue(null===(o=i.data)||void 0===o?void 0:o.url),this.fileUploadEvent.emit(this.fileUploadForm.value))},i=>{console.log(i)})})}removeFile(){this.selectedFile="",this.imgPath="",this.uploadPDFFileName="",this.fileUploadForm.get("value").setValue("")}contentUploading(){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:N,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we uploading your file",heading:"File Details"}}),yield this.contentUploadModal.present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.U),e.Y36(y.$),e.Y36(l.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-upload"]],viewQuery:function(t,i){if(1&t&&e.Gf(Pe,7),2&t){let o;e.iGM(o=e.CRH())&&(i.fileInput=o.first)}},inputs:{item:"item",is_required:"is_required"},outputs:{fileUploadEvent:"fileUploadEvent"},decls:25,vars:13,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],["class","compulsory",4,"ngIf"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileInput","hidden","","accept","image/png, image/jpg, image/jpeg , application/pdf",3,"change"],["fileInput",""],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["class","cross_pic_choose","src","assets/icon/close.svg",3,"click",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[4,"ngFor","ngForOf"],["color","danger"],[1,"compulsory"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],["src","assets/icon/close.svg",1,"cross_pic_choose",3,"click"],[1,"error-message",2,"color","black","width","100%"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0),e.YNc(1,we,3,0,"ion-item",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"label"),e._uU(5),e.YNc(6,qe,2,0,"span",3),e.qZA(),e.TgZ(7,"ion-row")(8,"ion-col",4),e.YNc(9,Ae,5,0,"div",5),e.TgZ(10,"input",6,7),e.NdJ("change",function(s){return i.uploadPhoto(s)}),e.qZA(),e.YNc(12,Ue,1,1,"img",8),e.YNc(13,Ne,1,0,"img",9),e.qZA(),e.TgZ(14,"ion-col",10)(15,"ion-button",11),e.NdJ("click",function(){return i.takePhoto()}),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"ion-row"),e.YNc(22,Me,3,1,"div",12),e.qZA(),e.TgZ(23,"ion-row"),e.YNc(24,Ee,2,1,"ng-container",13),e.qZA()()()()),2&t){let o,s;e.Q6J("formGroup",i.fileUploadForm),e.xp6(1),e.Q6J("ngIf","rejected"==i.document_status),e.xp6(1),e.Q6J("disabled",i.file_status),e.xp6(3),e.hij("",null==i.item?null:i.item.value.name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required||i.is_required),e.xp6(3),e.Q6J("ngIf",!i.imgPath),e.xp6(3),e.Q6J("ngIf",i.imgPath),e.xp6(1),e.Q6J("ngIf",i.imgPath&&!i.file_status),e.xp6(3),e.Oqu(i.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null!==(o=null==i.attribute_lang?null:i.attribute_lang.size)&&void 0!==o?o:"Size: below 10 MB"),e.xp6(2),e.Oqu(null!==(s=null==i.attribute_lang?null:i.attribute_lang.format_both)&&void 0!==s?s:"Format: JPEG/JPG/PNG/PDF"),e.xp6(2),e.Q6J("ngIf",""!=i.uploadPDFFileName),e.xp6(2),e.Q6J("ngForOf",i.validationMessages.value)}},dependencies:[p.sg,p.O5,r._Y,r.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.Ie,l.Nd,r.sg],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),n})();function Oe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(null==t.web_form?null:t.web_form.submit_success_content)}}function Qe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",2)(2,"a",8),e._uU(3,"Open Link"),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("href",null==t.web_form?null:t.web_form.submit_success_content,e.LSH)}}let Se=(()=>{class n{constructor(t,i){this.modalController=t,this.navCtrl=i}ngOnInit(){}exitPage(){this.modalController.dismiss(),this.navCtrl.navigateRoot(["/"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.IN),e.Y36(l.SH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-form-sucess"]],decls:11,vars:3,consts:[[1,"ion-padding","my-popup"],[2,"margin","20px"],[2,"text-align","center"],["src","assets/images/form-success.png","width","300px"],[2,"text-align","center","color","white"],[4,"ngIf"],["type","button","color","secondary","ion-button","",3,"click"],[2,"color","white","text-align","center"],[2,"color","white",3,"href"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA()(),e.TgZ(4,"h3",4),e._uU(5),e.qZA(),e.YNc(6,Oe,3,1,"ng-container",5),e.YNc(7,Qe,4,1,"ng-container",5),e.TgZ(8,"div",2)(9,"ion-button",6),e.NdJ("click",function(){return i.exitPage()}),e._uU(10,"Close"),e.qZA()()()),2&t&&(e.xp6(5),e.Oqu(i.heading),e.xp6(1),e.Q6J("ngIf","message"==(null==i.web_form?null:i.web_form.submit_success_action)),e.xp6(1),e.Q6J("ngIf","link"==(null==i.web_form?null:i.web_form.submit_success_action)))},dependencies:[p.O5,l.YG,l.W2],styles:["ion-content[_ngcontent-%COMP%]{--background: #0D4DA4}"]}),n})();function Ye(n,a){if(1&n&&(e.TgZ(0,"ion-card",13)(1,"ion-card-content")(2,"p"),e._uU(3,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.hij("Remarks: ",t.document_reject_remark,"")}}function De(n,a){1&n&&(e.TgZ(0,"div",14),e._UZ(1,"ion-icon",15),e.TgZ(2,"div")(3,"span",16),e._uU(4,"Choose File"),e.qZA()()())}function Be(n,a){if(1&n&&e._UZ(0,"img",17),2&n){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function je(n,a){1&n&&(e.TgZ(0,"div",18)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Ge(n,a){if(1&n&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function $e(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}let B=(()=>{class n{constructor(t,i,o){this.globalService=t,this.formApiService=i,this.modalController=o,this.imageUploadEvent=new e.vpe,this.category="",this.document_status="",this.document_reject_remark="",this.uploadSubmit=!1,this.uploadedID=!1,this.validation="",this.inputReadOnly=!0,this.photo_id_status="",this.ocr_error=[],this.uploadPDFFileName="",this.label="",this.conf=75,this.extension="png",this.attribute_lang={}}ngOnInit(){var t;this.attribute_lang=this.item.value.attribute_lang,console.log(null===(t=this.attribute_lang)||void 0===t?void 0:t.passport_front),this.imageUploadForm=new r.cw({value:new r.NI(this.item.value.value,this.item.value.is_required?[r.kI.required]:[])}),this.label=this.item.value.name,this.validation=this.item.value.validation,this.photo_id_status=this.item.value.is_locked,""!=this.item.value.value&&(this.imgPath=this.item.value.value,this.uploadPDFFileName=this.item.value.value.split("/").pop()),this.imageUploadForm.valueChanges.pipe(C(500)).subscribe(i=>{console.log(i),this.imageUploadEvent.emit(i)}),this.globalService.imageUploadEvent2.subscribe(i=>{i?.forEach(o=>{this.document_status=o.status,this.document_reject_remark=o.remark})})}takePhoto(){return(0,u.mG)(this,void 0,void 0,function*(){this.globalService.takePhoto().then(t=>(0,u.mG)(this,void 0,void 0,function*(){this.openImageModal(t),this.imgPath=t.imageUrl,this.selectedFile=t.selectedFile}))})}openImageModal(t){return(0,u.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t?.imageUrl,type:"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(i=>{"start_upload"==i.data&&this.uploadDoc()})})}removeFile(){this.selectedFile="",this.imgPath=""}uploadDoc(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;this.contentUploading();const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type","file"),t.append("name","file"),t.append("file",this.selectedFile,"image."+this.extension),this.formApiService.uploadDocument(t).subscribe(i=>{var o;console.log(i),i.success&&(this.uploadedID=!0,this.imageUploadForm.get("value").setValue(null===(o=i.data)||void 0===o?void 0:o.url),this.contentUploadModal.dismiss())})})}contentUploading(){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:N,backdropDismiss:!0,mode:"ios",componentProps:{content:"Please give us a moment as we read your Photo ID",heading:"Photo ID Details"}}),yield this.contentUploadModal.present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.U),e.Y36(y.$),e.Y36(l.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-image-upload"]],inputs:{item:"item"},outputs:{imageUploadEvent:"imageUploadEvent"},decls:25,vars:12,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],[1,"compulsory"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["size","8"],["ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[2,"color","red"],[4,"ngFor","ngForOf"],["color","danger"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"error-message"],[1,"error-message",2,"color","black","width","100%"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Ye,6,1,"ion-card",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"label"),e._uU(5),e.TgZ(6,"span",3),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"ion-row")(9,"ion-col",4),e.YNc(10,De,5,0,"div",5),e.YNc(11,Be,1,1,"img",6),e.qZA(),e.TgZ(12,"ion-col",7)(13,"ion-button",8),e.NdJ("click",function(){return i.takePhoto()}),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()(),e.TgZ(19,"ion-row"),e.YNc(20,je,3,0,"div",9),e.qZA(),e.TgZ(21,"ion-row"),e.YNc(22,Ge,3,1,"div",10),e.qZA()()()(),e.TgZ(23,"ul",11),e.YNc(24,$e,3,1,"ng-container",12),e.qZA()),2&t&&(e.Q6J("formGroup",i.imageUploadForm),e.xp6(1),e.Q6J("ngIf","rejected"==i.document_status),e.xp6(1),e.Q6J("disabled",i.photo_id_status),e.xp6(3),e.hij("",i.label," "),e.xp6(5),e.Q6J("ngIf",!i.imgPath),e.xp6(1),e.Q6J("ngIf",i.imgPath),e.xp6(3),e.Oqu(i.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.size),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===i.selectedFile&&i.uploadSubmit),e.xp6(2),e.Q6J("ngIf",""!=i.uploadPDFFileName),e.xp6(2),e.Q6J("ngForOf",i.ocr_error))},dependencies:[p.sg,p.O5,r._Y,r.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.Nd,r.sg],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),n})();function Re(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function Ve(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function He(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ve,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.inputEmailForm.get("value").hasError(t.type)&&(i.inputEmailForm.get("value").dirty||i.inputEmailForm.get("value").touched))}}let j=(()=>{class n{constructor(t,i){this.fb=t,this.formApiService=i,this.inputEmailEvent=new e.vpe,this.records=[],this.email_status=!1,this.validationMessages={value:[{type:"required",message:"Email is required"}],label:[{type:"required",message:"Email type is required"}]}}ngOnInit(){console.log(this.item.value),this.inputEmailForm=new r.cw({value:new r.NI(this.item.value.value.value,this.item.value.is_required?[r.kI.required]:[]),label:new r.NI(this.item.value.value.label,this.item.value.is_required?[r.kI.required]:[])}),this.email_status=this.item.value.is_locked,this.inputEmailForm.valueChanges.pipe(C(500)).subscribe(t=>{this.inputEmailEvent.emit(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(y.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-input-email"]],inputs:{item:"item"},outputs:{inputEmailEvent:"inputEmailEvent"},decls:17,vars:5,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["lines","none"],["formControlName","label"],["value",""],["value","work"],["value","home"],["type","text","formControlName","value","placeholder","Email Address"],[4,"ngFor","ngForOf"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Re,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-item",3)(7,"ion-select",4)(8,"ion-select-option",5),e._uU(9,"Select"),e.qZA(),e.TgZ(10,"ion-select-option",6),e._uU(11,"Work"),e.qZA(),e.TgZ(12,"ion-select-option",7),e._uU(13,"Home"),e.qZA()(),e._uU(14," \xa0 "),e._UZ(15,"ion-input",8),e.qZA(),e.YNc(16,He,2,1,"ng-container",9),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.inputEmailForm),e.xp6(1),e.Q6J("disabled",i.email_status),e.xp6(3),e.hij("",null==i.item?null:i.item.value.name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(11),e.Q6J("ngForOf",i.validationMessages.value))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.PM,l.FN,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.QI,l.j9,r.sg,r.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-item[_ngcontent-%COMP%]{padding:0;margin:0}ion-item[_ngcontent-%COMP%]::part(native){padding:0;--inner-padding-end: 0px;--padding-start:0px }ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;height:50px;padding:5px;--inner-padding-end: 0px;--padding-start:0px }.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),n})();function ze(n,a){1&n&&(e.TgZ(0,"span",10),e._uU(1,"*"),e.qZA())}function Le(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Ke(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Le,3,1,"div",11),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.inputPhoneForm.get("value").hasError(t.type)&&(i.inputPhoneForm.get("value").dirty||i.inputPhoneForm.get("value").touched))}}let G=(()=>{class n{constructor(t,i){this.fb=t,this.formApiService=i,this.inputPhoneEvent=new e.vpe,this.records=[],this.phone_status=!1,this.validationMessages={value:[{type:"required",message:"Phone is required"}],label:[{type:"required",message:"Phone type is required"}]}}ngOnInit(){console.log(this.item.value),this.inputPhoneForm=new r.cw({value:new r.NI(this.item.value.value.value,this.item.value.is_required?[r.kI.required]:[]),label:new r.NI(this.item.value.value.label,this.item.value.is_required?[r.kI.required]:[])}),this.phone_status=this.item.value.is_locked,this.inputPhoneForm.valueChanges.pipe(C(500)).subscribe(t=>{this.inputPhoneEvent.emit(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(y.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-input-phone"]],inputs:{item:"item"},outputs:{inputPhoneEvent:"inputPhoneEvent"},decls:17,vars:5,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["lines","none"],["formControlName","label"],["value",""],["value","work"],["value","home"],["type","text","formControlName","value","placeholder","Phone Number"],[4,"ngFor","ngForOf"],[1,"compulsory"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,ze,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-item",3)(7,"ion-select",4)(8,"ion-select-option",5),e._uU(9,"Select"),e.qZA(),e.TgZ(10,"ion-select-option",6),e._uU(11,"Work"),e.qZA(),e.TgZ(12,"ion-select-option",7),e._uU(13,"Home"),e.qZA()(),e._uU(14," \xa0 "),e._UZ(15,"ion-input",8),e.qZA(),e.YNc(16,Ke,2,1,"ng-container",9),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.inputPhoneForm),e.xp6(1),e.Q6J("disabled",i.phone_status),e.xp6(3),e.hij("",null==i.item?null:i.item.value.name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(11),e.Q6J("ngForOf",i.validationMessages.value))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.PM,l.FN,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.QI,l.j9,r.sg,r.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-item[_ngcontent-%COMP%]{padding:0;margin:0}ion-item[_ngcontent-%COMP%]::part(native){padding:0;--inner-padding-end: 0px;--padding-start:0px }ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;height:50px;padding:5px;--inner-padding-end: 0px;--padding-start:0px }.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),n})();function Xe(n,a){1&n&&(e.TgZ(0,"span",5),e._uU(1,"*"),e.qZA())}function We(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-select-option",6),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function et(n,a){if(1&n&&(e.TgZ(0,"div",8)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function tt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,et,3,1,"div",7),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.lookupForm.get("lookup").hasError(t.type)&&(i.lookupForm.get("lookup").dirty||i.lookupForm.get("lookup").touched))}}let $=(()=>{class n{constructor(t,i){this.fb=t,this.formApiService=i,this.lookupEvent=new e.vpe,this.records=[],this.lookup_status=!1,this.validationMessages={lookup:[{type:"required",message:"Lookup is required"}]}}ngOnInit(){console.log(this.item.value),this.lookupForm=new r.cw({lookup:new r.NI(this.item.value.value,this.item.value.is_required?[r.kI.required]:[])}),""!=this.item.value.lookup_type&&this.loadLookupData(this.item.value.lookup_type),this.lookup_status=this.item.value.is_locked,console.log("lookup",this.lookup_status)}loadLookupData(t){this.formApiService.getLookupData(t).subscribe(i=>{i.success&&(this.records=i.data)})}changeLookup(t){this.lookupForm.get("lookup").setValue(t.target.value),this.lookupEvent.emit(t.target.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(y.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lookup"]],inputs:{item:"item"},outputs:{lookupEvent:"lookupEvent"},decls:9,vars:6,consts:[[3,"formGroup"],[3,"disabled"],["class","compulsory",4,"ngIf"],["formControlName","lookup",3,"ionChange"],[4,"ngFor","ngForOf"],[1,"compulsory"],[3,"value"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Xe,2,0,"span",2),e.qZA(),e.TgZ(6,"ion-select",3),e.NdJ("ionChange",function(s){return i.changeLookup(s)}),e.YNc(7,We,3,2,"ng-container",4),e.qZA(),e.YNc(8,tt,2,1,"ng-container",4),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.lookupForm),e.xp6(1),e.Q6J("disabled",i.lookup_status),e.xp6(3),e.hij("",null==i.item?null:i.item.value.name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(2),e.Q6J("ngForOf",i.records),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.lookup))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.PM,l.FN,l.Q$,l.t9,l.n0,l.QI,r.sg,r.u],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}"]}),n})();function it(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}function nt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-col")(1,"ion-button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmPopup())}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("Yes, this is my ",t.button_message,"")}}let R=(()=>{class n{constructor(t,i){this.modalController=t,this.alertCtrl=i,this.ocr_error=[],this.critical_case=!1,this.button_message="Passport"}ngOnInit(){}exitScreen(){this.modalController.dismiss()}confirmPopup(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({cssClass:"wordCloudPoll",header:"Confirm for submission",message:"Type 'confirm' to continue",mode:"ios",inputs:[{name:"res",placeholder:"Enter the text to confirm"}],buttons:[{text:"Submit",id:"confirm-button",handler:i=>(0,u.mG)(this,void 0,void 0,function*(){"confirm"==i.res.toLowerCase().replaceAll(" ","")&&this.modalController.dismiss("confirm")})}]})).present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.IN),e.Y36(l.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-error-screen"]],decls:11,vars:2,consts:[[1,"ion-padding","my-popup"],[2,"text-align","center"],[2,"color","red"],[4,"ngFor","ngForOf"],[4,"ngIf"],["ion-button","","color","danger",3,"click"],["ion-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"h3",1),e._uU(2,"Oops!"),e.qZA(),e.TgZ(3,"ul",2),e.YNc(4,it,3,1,"ng-container",3),e.qZA(),e.TgZ(5,"div",1)(6,"ion-row"),e.YNc(7,nt,3,1,"ion-col",4),e.TgZ(8,"ion-col")(9,"ion-button",5),e.NdJ("click",function(){return i.exitScreen()}),e._uU(10,"No, I will upload again"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.ocr_error),e.xp6(3),e.Q6J("ngIf",i.critical_case))},dependencies:[p.sg,p.O5,l.YG,l.wI,l.W2,l.Nd],styles:["ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:15px}"]}),n})();var M,ot=new Uint8Array(16);function at(){if(!M&&!(M=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M(ot)}const st=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,lt=function rt(n){return"string"==typeof n&&st.test(n)};for(var v=[],Q=0;Q<256;++Q)v.push((Q+256).toString(16).substr(1));const A=function dt(n,a,t){var i=(n=n||{}).random||(n.rng||at)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,a){t=t||0;for(var o=0;o<16;++o)a[t+o]=i[o];return a}return function ct(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(v[n[a+0]]+v[n[a+1]]+v[n[a+2]]+v[n[a+3]]+"-"+v[n[a+4]]+v[n[a+5]]+"-"+v[n[a+6]]+v[n[a+7]]+"-"+v[n[a+8]]+v[n[a+9]]+"-"+v[n[a+10]]+v[n[a+11]]+v[n[a+12]]+v[n[a+13]]+v[n[a+14]]+v[n[a+15]]).toLowerCase();if(!lt(t))throw TypeError("Stringified UUID is invalid");return t}(i)};var S=h(2340),ut=h(529);let V=(()=>{class n{constructor(t){this.http=t,this.headers={},this.baseURL=""}uploadDocument(t,i){return this.http.post(S.N.hypervergeApi+"readId",t,{headers:{transactionId:i,appId:S.N.appId,appKey:S.N.appKey}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ut.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _t=["fileFront"],mt=["fileInput"],gt=["fileBack"];function ht(n,a){1&n&&(e.TgZ(0,"ion-item",31)(1,"p"),e._uU(2,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA()())}function ft(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e._UZ(3,"hr"),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.label)}}function vt(n,a){1&n&&(e.TgZ(0,"div",17),e._UZ(1,"ion-icon",32),e.TgZ(2,"div")(3,"span",21),e._uU(4,"Choose File"),e.qZA()()())}function xt(n,a){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw();e.Q6J("src",t.imgPathFront,e.LSH)}}function bt(n,a){1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Ft(n,a){1&n&&(e.TgZ(0,"div",17),e._UZ(1,"ion-icon",32),e.TgZ(2,"div")(3,"span",21),e._uU(4,"Choose File"),e.qZA()()())}function yt(n,a){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw();e.Q6J("src",t.imgPathBack,e.LSH)}}function Zt(n,a){1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Tt(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function It(n,a){1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function Ct(n,a){if(1&n&&(e.TgZ(0,"div",35)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function kt(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function Pt(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function wt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Pt,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("exp_date").hasError(t.type)&&(i.passportForm.get("exp_date").dirty||i.passportForm.get("exp_date").touched))}}function qt(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function At(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Ut(n,a){if(1&n&&(e.ynx(0),e.YNc(1,At,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("issue_date").hasError(t.type)&&(i.passportForm.get("issue_date").dirty||i.passportForm.get("issue_date").touched))}}function Nt(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function Mt(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Jt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Mt,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("issue_place").hasError(t.type)&&(i.passportForm.get("issue_place").dirty||i.passportForm.get("issue_place").touched))}}function Et(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function Ot(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Qt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Ot,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("name_first").hasError(t.type)&&(i.passportForm.get("name_first").dirty||i.passportForm.get("name_first").touched))}}function St(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function Yt(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Dt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Yt,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("name_last").hasError(t.type)&&(i.passportForm.get("name_last").dirty||i.passportForm.get("name_last").touched))}}function Bt(n,a){1&n&&(e.TgZ(0,"span",4),e._uU(1,"*"),e.qZA())}function jt(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Gt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,jt,3,1,"div",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.passportForm.get("passportno").hasError(t.type)&&(i.passportForm.get("passportno").dirty||i.passportForm.get("passportno").touched))}}let H=(()=>{class n{constructor(t,i,o,s){this.globalService=t,this.formApiService=i,this.modalController=o,this.hypervergeApiService=s,this.scrollEvent=new e.vpe,this.criticalEvent=new e.vpe,this.passportEvent=new e.vpe,this.submitPassportEvent=new e.vpe,this.imgPathFront="",this.imgPathBack="",this.category="",this.passport_status=!1,this.document_status="",this.uploadedFront=!1,this.uploadedBack=!1,this.uploadedMerged=!1,this.uploadPDFFileName="",this.uploadSubmitFront=!1,this.uploadSubmitBack=!1,this.uploadSubmitFull=!1,this.conf=75,this.attribute_lang={},this.uploadType="",this.inputReadOnly=!0,this.front_id_value="",this.back_id_value="",this.ocr_error_front=[],this.ocr_error_back=[],this.is_document_uploaded=!1,this.hit_count_front=0,this.hit_count_back=0,this.country_code="",this.member_name="",this.ocr_member_name="",this.date_of_expiry="",this.front_not_detected=0,this.back_not_detected=0,this.other_traveller=!1,this.validationMessages={exp_date:[{type:"required",message:"Exp date is required"}],issue_date:[{type:"required",message:"Issue date is required"}],issue_place:[{type:"required",message:"Issue place is required"}],name_first:[{type:"required",message:"First name is required"}],name_last:[{type:"required",message:"Last name is required"}],passportno:[{type:"required",message:"Passport no. is required"}],is_document_uploaded:[{type:"required",message:"Please click on upload button."}]},this.ocr_enabled=!1,this.document_reject_remark="",this.flag=!1,this.label=""}ngOnInit(){var t,i,o,s,c,d,m,_,g,f,b,x,Z;this.attribute_lang=this.item.value.attribute_lang,this.member_name=this.form_data.name,this.ocr_enabled=this.item.value.ocr_enabled,this.other_traveller=this.item.value.other_traveller,this.label=this.item.value.name,this.passportForm=new r.cw({exp_date:new r.NI(null===(t=this.item.value.value)||void 0===t?void 0:t.exp_date,this.item.value.is_required?[r.kI.required]:[]),issue_date:new r.NI(null===(i=this.item.value.value)||void 0===i?void 0:i.issue_date,this.item.value.is_required?[r.kI.required]:[]),issue_place:new r.NI(null===(o=this.item.value.value)||void 0===o?void 0:o.issue_place,this.item.value.is_required?[r.kI.required]:[]),name_first:new r.NI(null===(s=this.item.value.value)||void 0===s?void 0:s.name_first,this.item.value.is_required?[r.kI.required]:[]),name_last:new r.NI(null===(c=this.item.value.value)||void 0===c?void 0:c.name_last,this.item.value.is_required?[r.kI.required]:[]),passportno:new r.NI(null===(d=this.item.value.value)||void 0===d?void 0:d.passportno,this.item.value.is_required?[r.kI.required]:[]),status:new r.NI(null===(m=this.item.value.value)||void 0===m?void 0:m.status,null),gender:new r.NI(null===(_=this.item.value.value)||void 0===_?void 0:_.gender,null),dob:new r.NI(null===(g=this.item.value.value)||void 0===g?void 0:g.dob,null),address:new r.NI(null===(f=this.item.value.value)||void 0===f?void 0:f.address,null),filled_manually:new r.NI(null===(b=this.item.value.value)||void 0===b?void 0:b.filled_manually,null),is_document_uploaded:new r.NI(null!==(x=this.item.value.value)&&void 0!==x&&x.exp_date?"uploaded":"",[r.kI.required])}),this.passportForm.valueChanges.pipe(C(500)).subscribe(T=>{this.passportEvent.emit(T)}),this.globalService.passportFilesEvent.subscribe(T=>{T?.forEach(I=>{"passport-merged"==I.type&&(this.document_status=I.status,this.document_reject_remark=I.remark,this.uploadedMerged=!0),"passport-front"==I.type&&(this.imgPathFront=I.path,this.uploadedFront=!0),"passport-back"==I.type&&(this.imgPathBack=I.path,this.uploadedBack=!0)})}),""!=(null===(Z=this.item.value.value)||void 0===Z?void 0:Z.exp_date)&&(this.inputReadOnly=!1)}takePhoto(t){return(0,u.mG)(this,void 0,void 0,function*(){"front"==t&&this.fileFront.nativeElement.click(),"back"==t&&this.fileBack.nativeElement.click()})}uploadFrontPhoto(t){const i=t.target.files[0];if(i.size>=F.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=s=>{let c=s.target.result;this.openImageModal(c,"front"),this.imgPathFront=c},o.readAsDataURL(i),this.selectedFileFront=i}}uploadBackPhoto(t){const i=t.target.files[0];if(i.size>=F.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=s=>{let c=s.target.result;this.openImageModal(c,"back"),this.imgPathBack=c},o.readAsDataURL(i),this.selectedFileBack=i}}openImageModal(t,i){return(0,u.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(o=>{"start_upload"==o.data&&("front"==i&&this.uploadDocFront(),"back"==i&&this.uploadDocBack())})})}removeFileFront(){this.selectedFileFront="",this.imgPathFront=""}removeFileBack(){this.selectedFileBack="",this.imgPathBack=""}uploadDocFront(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitFront=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileFront)return;this.uploadType="image",this.contentUploading("Scanning your passport\u2014sit tight, this won't take long!");const t=new FormData;t.append("countryId","ind"),t.append("documentId","passport"),t.append("expectedDocumentSide","front"),t.append("image",this.selectedFileFront);const i=localStorage.getItem("ca_user_id");yield this.hypervergeApiService.uploadDocument(t,i).subscribe(o=>{this.contentUploadModal.dismiss(),"success"==o.status&&(this.hit_count_front++,this.passportForm.get("exp_date").setValue(o.result.details[0].fieldsExtracted.dateOfExpiry.value),this.passportForm.get("issue_date").setValue(o.result.details[0].fieldsExtracted.dateOfIssue.value),this.passportForm.get("issue_place").setValue(o.result.details[0].fieldsExtracted.placeOfIssue.value),this.passportForm.get("name_first").setValue(o.result.details[0].fieldsExtracted.firstName.value),this.passportForm.get("name_last").setValue(o.result.details[0].fieldsExtracted.lastName.value),this.passportForm.get("passportno").setValue(o.result.details[0].fieldsExtracted.idNumber.value),this.passportForm.get("gender").setValue(o.result.details[0].fieldsExtracted.gender.value),this.passportForm.get("dob").setValue(o.result.details[0].fieldsExtracted.dateOfBirth.value),this.country_code=o.result.details[0].fieldsExtracted.countryCode.value,this.front_id_value=o.result.details[0].fieldsExtracted.idNumber.value,this.ocr_member_name=o.result.details[0].fieldsExtracted.fullName.value,this.date_of_expiry=o.result.details[0].fieldsExtracted.dateOfExpiry.value,this.extracted_json_front=o.result,this.ocr_transaction_id_front=A(),this.uploadSubmitBack=!0,this.uploadedFront=!0)},o=>{this.contentUploadModal.dismiss(),0==this.front_not_detected?this.globalService.showError(o.error.result.error):(this.passportForm.get("filled_manually").setValue(!0),this.globalService.showError("Front Page Not Detected. Please fill passport details manually.")),this.front_not_detected++})})}uploadDocBack(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitBack=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileBack)return;this.uploadType="image",this.contentUploading("Scanning your passport\u2014sit tight, this won't take long!");const t=new FormData;t.append("countryId","ind"),t.append("documentId","passport"),t.append("expectedDocumentSide","back"),t.append("image",this.selectedFileBack);const i=localStorage.getItem("ca_user_id");yield this.hypervergeApiService.uploadDocument(t,i).subscribe(o=>{if(this.contentUploadModal.dismiss(),console.log(o),"success"==o.status){this.hit_count_back++;const _={address:o.result.details[0].fieldsExtracted.address.value,city:o.result.details[0].fieldsExtracted.address.district,state:o.result.details[0].fieldsExtracted.address.province,pincode:o.result.details[0].fieldsExtracted.address.zipCode,country:F.rQ[this.country_code]};this.passportForm.get("address").setValue(_),this.passportForm.get("is_document_uploaded").setValue(""),this.back_id_value=o.result.details[0].fieldsExtracted.idNumber.value,this.ocr_transaction_id_back=A(),this.extracted_json_back=o.result,this.uploadedBack=!0;var s=[],c=!1;if(""!=this.date_of_expiry){const g=new Date;var d=this.date_of_expiry.split("-");g>new Date(d[2],d[1]-1,d[0])&&(s.push("Your passport has expired. Please upload the latest passport"),this.passportForm.get("exp_date").setValue(""))}""!=this.member_name&&""!=this.ocr_member_name&&0==this.other_traveller&&this.member_name.toLowerCase()!=this.ocr_member_name.toLowerCase()&&(s.push("The user's registered Full Name is "+this.member_name+", whereas the Full Name listed on their document is "+this.ocr_member_name+". It's important to verify this information for consistency and accuracy."),c=!0),""==this.back_id_value?s.push("We could not retreive passport number from the image. Please ensure it is a valid back page of same passport"):""!=this.back_id_value&&this.front_id_value!=this.back_id_value&&(s.push("User Passport Front & Back Number Doesn't Match. Please Verify. Passport Number given in Front: "+this.front_id_value+", Passport Number given in Back: "+this.back_id_value),c=!0),s.length>0?(this.errorScreen(s,c),1==c?this.criticalEvent.emit(!0):this.is_document_uploaded=!0):(this.is_document_uploaded=!0,this.globalService.showMessage("We've filled out your details. Kindly double-check and you're good to go!")),this.ocr_error_back.push(s),this.scrollEvent.emit("scroll")}},o=>{if(this.contentUploadModal.dismiss(),0==this.back_not_detected){var s=[];s.push(o.error.result.error),this.errorScreen(s,!1)}else this.passportForm.get("filled_manually").setValue(!0),this.globalService.showError("Back Page Not Detected. Please fill passport details manually.");this.back_not_detected++})})}contentUploading(t){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:N,backdropDismiss:!0,mode:"ios",componentProps:{content:t,heading:"Passport Details"}}),yield this.contentUploadModal.present()})}errorScreen(t,i){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:R,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{critical_case:i,button_message:"Passport",ocr_error:t,heading:"Oops!"}}),yield this.contentUploadModal.present(),yield this.contentUploadModal.onDidDismiss().then(o=>{"confirm"==o.data?(this.inputReadOnly=!1,this.criticalEvent.emit(!1),this.passportForm.get("filled_manually").setValue(!0),this.is_document_uploaded=!0,console.log("confirm clicked")):console.log("confirm not clicked")})})}uploadDocuments(){1==this.uploadedMerged?this.uploadMergeAWS():this.uploadDocAWSFront()}uploadDocAWSFront(){return(0,u.mG)(this,void 0,void 0,function*(){if(1==this.uploadedFront){this.contentUploading("Relax! We're securely uploading your passports to our vault for future reference.");const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type","passport-front"),t.append("name","passport-front"),t.append("ocr_error",JSON.stringify(this.ocr_error_back)),t.append("extracted_json",JSON.stringify(this.extracted_json_front)),t.append("hit_count",this.hit_count_front.toString()),t.append("ocr_transaction_id",this.ocr_transaction_id_front),t.append("file",this.selectedFileFront),this.formApiService.uploadDocument(t).subscribe(i=>{i.success&&this.uploadDocAWSBack()})}})}uploadDocAWSBack(){return(0,u.mG)(this,void 0,void 0,function*(){if(1==this.uploadedBack){const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type","passport-back"),t.append("name","passport-back"),t.append("ocr_error",JSON.stringify(this.ocr_error_back)),t.append("extracted_json",JSON.stringify(this.extracted_json_back)),t.append("hit_count",this.hit_count_front.toString()),t.append("ocr_transaction_id",this.ocr_transaction_id_back),t.append("file",this.selectedFileBack),this.formApiService.uploadDocument(t).subscribe(i=>{this.contentUploadModal.dismiss(),i.success&&(this.passportForm.get("is_document_uploaded").setValue("uploaded"),this.is_document_uploaded=!1,this.submitPassportEvent.emit("submit"))},i=>{this.contentUploadModal.dismiss(),this.globalService.showError(i.error.message)})}})}uploadPhoto(t){const i=t.target.files[0];i.size>=F.m_?this.globalService.showError("PDF file should be less than 10 MB"):(this.uploadPDFFileName=i.name,this.selectedFileFront=i,this.selectedFileBack=i,this.openPdfModal(this.uploadPDFFileName),i?.name&&(this.uploadType="pdf"))}openPdfModal(t){return(0,u.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"pdf"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(i=>(0,u.mG)(this,void 0,void 0,function*(){this.uploadPDFDocFront()}))})}uploadPDFDocFront(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitFront=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileFront)return;this.uploadType="image",this.contentUploading("Scanning your passport\u2014sit tight, this won't take long!");const t=new FormData;t.append("countryId","ind"),t.append("documentId","passport"),t.append("expectedDocumentSide","front"),t.append("image",this.selectedFileFront);const i=localStorage.getItem("ca_user_id");yield this.hypervergeApiService.uploadDocument(t,i).subscribe(o=>{this.contentUploadModal.dismiss(),console.log(o),"success"==o.status&&(this.hit_count_front++,this.passportForm.get("exp_date").setValue(o.result.details[0].fieldsExtracted.dateOfExpiry.value),this.passportForm.get("issue_date").setValue(o.result.details[0].fieldsExtracted.dateOfIssue.value),this.passportForm.get("issue_place").setValue(o.result.details[0].fieldsExtracted.placeOfIssue.value),this.passportForm.get("name_first").setValue(o.result.details[0].fieldsExtracted.firstName.value),this.passportForm.get("name_last").setValue(o.result.details[0].fieldsExtracted.lastName.value),this.passportForm.get("passportno").setValue(o.result.details[0].fieldsExtracted.idNumber.value),this.passportForm.get("gender").setValue(o.result.details[0].fieldsExtracted.gender.value),this.passportForm.get("dob").setValue(o.result.details[0].fieldsExtracted.dateOfBirth.value),this.country_code=o.result.details[0].fieldsExtracted.countryCode.value,this.front_id_value=o.result.details[0].fieldsExtracted.idNumber.value,this.ocr_member_name=o.result.details[0].fieldsExtracted.fullName.value,this.date_of_expiry=o.result.details[0].fieldsExtracted.dateOfExpiry.value,this.extracted_json_front=o.result,this.ocr_transaction_id_front=A(),this.uploadedMerged=!0,this.uploadPDFDocBack())},o=>{this.contentUploadModal.dismiss(),0==this.front_not_detected?this.globalService.showError(o.error.result.error):(this.passportForm.get("filled_manually").setValue(!0),this.globalService.showError("Front Page Not Detected. Please fill passport details manually.")),this.front_not_detected++})})}uploadPDFDocBack(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmitBack=!0,this.uploadSubmitFull=!1,void 0===this.selectedFileBack)return;this.uploadType="image",this.contentUploading("Scanning your passport\u2014sit tight, this won't take long!");const t=new FormData;t.append("countryId","ind"),t.append("documentId","passport"),t.append("expectedDocumentSide","back"),t.append("image",this.selectedFileBack);const i=localStorage.getItem("ca_user_id");yield this.hypervergeApiService.uploadDocument(t,i).subscribe(o=>{if(this.contentUploadModal.dismiss(),console.log(o),"success"==o.status){this.hit_count_back++;const _={address:o.result.details[0].fieldsExtracted.address.value,city:o.result.details[0].fieldsExtracted.address.district,state:o.result.details[0].fieldsExtracted.address.province,pincode:o.result.details[0].fieldsExtracted.address.zipCode,country:F.rQ[this.country_code]};this.passportForm.get("address").setValue(_),this.passportForm.get("is_document_uploaded").setValue(""),this.back_id_value=o.result.details[0].fieldsExtracted.idNumber.value,this.ocr_transaction_id_back=A(),this.extracted_json_back=o.result;var s=[],c=!1;if(""!=this.date_of_expiry){const g=new Date;var d=this.date_of_expiry.split("-");g>new Date(d[2],d[1]-1,d[0])&&(s.push("Your passport has expired. Please upload the latest passport"),this.passportForm.get("exp_date").setValue(""))}""!=this.member_name&&""!=this.ocr_member_name&&0==this.other_traveller&&this.member_name.toLowerCase()!=this.ocr_member_name.toLowerCase()&&(s.push("The user's registered Full Name is "+this.member_name+", whereas the Full Name listed on their document is "+this.ocr_member_name+". It's important to verify this information for consistency and accuracy."),c=!0),""==this.back_id_value?s.push("We could not retreive passport number from the image. Please ensure it is a valid back page of same passport"):""!=this.back_id_value&&this.front_id_value!=this.back_id_value&&(s.push("User Passport Front & Back Number Doesn't Match. Please Verify. Passport Number given in Front: "+this.front_id_value+", Passport Number given in Back: "+this.back_id_value),c=!0),s.length>0?(this.errorScreen(s,c),1==c?this.criticalEvent.emit(!0):this.is_document_uploaded=!0):(this.is_document_uploaded=!0,this.globalService.showMessage("We've filled out your details. Kindly double-check and you're good to go!")),this.ocr_error_back.push(s),this.scrollEvent.emit("scroll")}},o=>{if(this.contentUploadModal.dismiss(),0==this.back_not_detected){var s=[];s.push(o.error.result.error),this.errorScreen(s,!1)}else this.passportForm.get("filled_manually").setValue(!0),this.globalService.showError("Back Page Not Detected. Please fill passport details manually.");this.back_not_detected++})})}uploadMergeAWS(){return(0,u.mG)(this,void 0,void 0,function*(){if(1==this.uploadedMerged){this.contentUploading("Relax! We're securely uploading your passports to our vault for future reference.");const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type","passport-merged"),t.append("name","passport-merged"),t.append("ocr_error",JSON.stringify(this.ocr_error_back)),t.append("extracted_json",JSON.stringify({"passport-front":this.extracted_json_front,"passport-back":this.extracted_json_back})),t.append("hit_count",this.hit_count_front.toString()),t.append("ocr_transaction_id",this.ocr_transaction_id_front),t.append("file",this.selectedFileFront),this.formApiService.uploadDocument(t).subscribe(i=>{this.contentUploadModal.dismiss(),i.success&&(this.is_document_uploaded=!1,this.passportForm.get("is_document_uploaded").setValue("uploaded"),this.submitPassportEvent.emit("submit"))},i=>{this.contentUploadModal.dismiss(),this.globalService.showError(i.error.message)})}})}choosePdf(){this.fileInput.nativeElement.click()}uploadDocumentIfNotUploaded(){1==this.is_document_uploaded&&this.uploadDocuments()}onExpiryChange(t){const i=new Date;let o=new Date(t.target.value);var s=t.target.value.split("-");o=new Date(s[2],s[1]-1,s[0]),i>o&&(this.globalService.showError("Please enter valid expiry date"),t.target.value=""),this.date_of_expiry!=t.target.value&&this.globalService.showError("The expiry date you entered manually does not match the expiry date on the passport.")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.U),e.Y36(y.$),e.Y36(l.IN),e.Y36(V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-passport"]],viewQuery:function(t,i){if(1&t&&(e.Gf(_t,7),e.Gf(mt,7),e.Gf(gt,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.fileFront=o.first),e.iGM(o=e.CRH())&&(i.fileInput=o.first),e.iGM(o=e.CRH())&&(i.fileBack=o.first)}},inputs:{item:"item",form_data:"form_data"},outputs:{scrollEvent:"scrollEvent",criticalEvent:"criticalEvent",passportEvent:"passportEvent",submitPassportEvent:"submitPassportEvent"},decls:109,vars:52,consts:[[3,"formGroup"],[3,"disabled"],["color","danger",4,"ngIf"],[4,"ngIf"],[1,"compulsory"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileFront","hidden","","accept","image/png, image/jpg, image/jpeg",3,"change"],["fileFront",""],["style","width:100px;height:100px;object-fit: contain;",3,"src",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["type","file","id","fileBack","hidden","","accept","image/png, image/jpg, image/jpeg",3,"change"],["fileBack",""],[2,"text-align","center"],["class","compulsory",4,"ngIf"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px","color","red"],["type","file","id","fileInput","hidden","","accept","application/pdf",3,"change"],["fileInput",""],[2,"font-size","10px"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],[1,"form-group"],["type","text","formControlName","exp_date",3,"readonly","change"],[4,"ngFor","ngForOf"],["type","text","formControlName","issue_date",3,"readonly"],["type","text","formControlName","issue_place",3,"readonly"],["type","text","formControlName","name_first",3,"readonly"],["type","text","formControlName","name_last",3,"readonly"],["type","text","formControlName","passportno",3,"readonly"],["color","danger"],["name","document-attach-outline",2,"font-size","40px"],[2,"width","100px","height","100px","object-fit","contain",3,"src"],[1,"error-message"],[1,"error-message",2,"color","black","width","100%"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card",1)(2,"ion-card-content"),e.YNc(3,ht,3,0,"ion-item",2),e.YNc(4,ft,4,1,"ng-container",3),e.TgZ(5,"label"),e._uU(6),e.TgZ(7,"span",4),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"ion-row")(10,"ion-col",5),e.YNc(11,vt,5,0,"div",6),e.TgZ(12,"input",7,8),e.NdJ("change",function(s){return i.uploadFrontPhoto(s)}),e.qZA(),e.YNc(14,xt,1,1,"img",9),e.qZA(),e.TgZ(15,"ion-col",10)(16,"ion-button",11),e.NdJ("click",function(){return i.takePhoto("front")}),e._uU(17),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.qZA()()(),e.TgZ(22,"ion-row"),e.YNc(23,bt,3,0,"div",12),e.qZA()()(),e.TgZ(24,"ion-card",1)(25,"ion-card-content")(26,"label"),e._uU(27),e.TgZ(28,"span",4),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"ion-row")(31,"ion-col",5),e.YNc(32,Ft,5,0,"div",6),e.TgZ(33,"input",13,14),e.NdJ("change",function(s){return i.uploadBackPhoto(s)}),e.qZA(),e.YNc(35,yt,1,1,"img",9),e.qZA(),e.TgZ(36,"ion-col",10)(37,"ion-button",11),e.NdJ("click",function(){return i.takePhoto("back")}),e._uU(38),e.qZA(),e.TgZ(39,"p"),e._uU(40),e.qZA(),e.TgZ(41,"p"),e._uU(42),e.qZA()()(),e.TgZ(43,"ion-row"),e.YNc(44,Zt,3,0,"div",12),e.qZA()()(),e.TgZ(45,"p",15),e._uU(46,"OR"),e.qZA(),e.TgZ(47,"ion-card",1)(48,"ion-card-content")(49,"label"),e._uU(50),e.YNc(51,Tt,2,0,"span",16),e.qZA(),e.TgZ(52,"ion-row")(53,"ion-col",5)(54,"div",17),e._UZ(55,"ion-icon",18),e.TgZ(56,"input",19,20),e.NdJ("change",function(s){return i.uploadPhoto(s)}),e.qZA(),e.TgZ(58,"div")(59,"span",21),e._uU(60,"Choose File"),e.qZA()()()(),e.TgZ(61,"ion-col",10)(62,"ion-button",11),e.NdJ("click",function(){return i.choosePdf()}),e._uU(63),e.qZA(),e.TgZ(64,"p"),e._uU(65),e.qZA(),e.TgZ(66,"p"),e._uU(67),e.qZA()()(),e.TgZ(68,"ion-row"),e.YNc(69,It,3,0,"div",12),e.YNc(70,Ct,3,1,"div",22),e.qZA()()(),e.TgZ(71,"ion-card",1)(72,"ion-card-content")(73,"div",23)(74,"label"),e._uU(75),e.YNc(76,kt,2,0,"span",16),e.qZA(),e.TgZ(77,"ion-input",24),e.NdJ("change",function(s){return i.onExpiryChange(s)}),e.qZA(),e.YNc(78,wt,2,1,"ng-container",25),e.qZA(),e.TgZ(79,"div",23)(80,"label"),e._uU(81),e.YNc(82,qt,2,0,"span",16),e.qZA(),e._UZ(83,"ion-input",26),e.YNc(84,Ut,2,1,"ng-container",25),e.qZA(),e.TgZ(85,"div",23)(86,"label"),e._uU(87),e.YNc(88,Nt,2,0,"span",16),e.qZA(),e._UZ(89,"ion-input",27),e.YNc(90,Jt,2,1,"ng-container",25),e.qZA(),e.TgZ(91,"div",23)(92,"label"),e._uU(93),e.YNc(94,Et,2,0,"span",16),e.qZA(),e._UZ(95,"ion-input",28),e.YNc(96,Qt,2,1,"ng-container",25),e.qZA(),e.TgZ(97,"div",23)(98,"label"),e._uU(99),e.YNc(100,St,2,0,"span",16),e.qZA(),e._UZ(101,"ion-input",29),e.YNc(102,Dt,2,1,"ng-container",25),e.qZA(),e.TgZ(103,"div",23)(104,"label"),e._uU(105),e.YNc(106,Bt,2,0,"span",16),e.qZA(),e._UZ(107,"ion-input",30),e.YNc(108,Gt,2,1,"ng-container",25),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.passportForm),e.xp6(1),e.Q6J("disabled",i.passport_status||1==i.uploadedMerged),e.xp6(2),e.Q6J("ngIf","rejected"==i.document_status),e.xp6(1),e.Q6J("ngIf",(null==i.attribute_lang?null:i.attribute_lang.passport_front)!=i.label),e.xp6(2),e.hij("",null==i.attribute_lang?null:i.attribute_lang.passport_front," "),e.xp6(5),e.Q6J("ngIf",!i.imgPathFront),e.xp6(3),e.Q6J("ngIf",i.imgPathFront&&i.uploadedFront),e.xp6(3),e.Oqu(i.uploadedFront?"Update":"Upload"),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.size),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===i.selectedFileFront&&i.uploadSubmitFront),e.xp6(1),e.Q6J("disabled",i.passport_status||1==i.uploadedMerged),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.passport_back," "),e.xp6(5),e.Q6J("ngIf",!i.imgPathBack),e.xp6(3),e.Q6J("ngIf",i.imgPathBack&&i.uploadedBack),e.xp6(3),e.Oqu(i.uploadedBack?"Update":"Upload"),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.size),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.format_image),e.xp6(2),e.Q6J("ngIf",void 0===i.selectedFileBack&&i.uploadSubmitBack),e.xp6(3),e.Q6J("disabled",i.passport_status||1==i.uploadedFront),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.merged_passport," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(12),e.Oqu(i.uploadedMerged?"Update":"Upload"),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.size),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.format_document),e.xp6(2),e.Q6J("ngIf",void 0===i.selectedFile&&i.uploadSubmitFull),e.xp6(1),e.Q6J("ngIf",""!=i.uploadPDFFileName),e.xp6(1),e.Q6J("disabled",i.passport_status),e.xp6(4),e.hij("",null==i.attribute_lang?null:i.attribute_lang.exp_date," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.exp_date),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.issue_date," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.issue_date),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.issue_place," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.issue_place),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.name_first," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.name_first),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.name_last," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.name_last),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.passportno," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.passport_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.passportno))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.pK,l.Ie,l.Nd,l.j9,r.sg,r.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}.cross_pdf_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:18px;margin-top:-18px}"]}),n})();const $t=["fileInput"];function Rt(n,a){if(1&n&&(e.TgZ(0,"ion-card",24)(1,"ion-card-content")(2,"p"),e._uU(3,"Handler has rejected a document, please go to the form and update the respective document"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.hij("Remarks: ",t.document_reject_remark,"")}}function Vt(n,a){1&n&&(e.TgZ(0,"ion-select-option",25),e._uU(1,"Adhaar card"),e.qZA())}function Ht(n,a){1&n&&(e.TgZ(0,"ion-select-option",26),e._uU(1,"PAN Card"),e.qZA())}function zt(n,a){1&n&&(e.TgZ(0,"ion-select-option",27),e._uU(1,"Voter ID"),e.qZA())}function Lt(n,a){1&n&&(e.TgZ(0,"ion-select-option",28),e._uU(1,"Driving License"),e.qZA())}function Kt(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function Xt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Kt,3,1,"div",18),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.photoIdForm.get("category").hasError(t.type)&&(i.photoIdForm.get("category").dirty||i.photoIdForm.get("category").touched))}}function Wt(n,a){1&n&&(e.TgZ(0,"div",30),e._UZ(1,"ion-icon",31),e.TgZ(2,"div")(3,"span",32),e._uU(4,"Choose File"),e.qZA()()())}function ei(n,a){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw();e.Q6J("src",t.imgPath,e.LSH)}}function ti(n,a){1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2,"Please upload document."),e.qZA()())}function ii(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.uploadPDFFileName)}}function ni(n,a){1&n&&(e.TgZ(0,"span",35),e._uU(1,"*"),e.qZA())}function oi(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function ai(n,a){if(1&n&&(e.ynx(0),e.YNc(1,oi,3,1,"div",18),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.photoIdForm.get("id_name").hasError(t.type)&&(i.photoIdForm.get("id_name").dirty||i.photoIdForm.get("id_name").touched))}}function si(n,a){1&n&&(e.TgZ(0,"span",35),e._uU(1,"*"),e.qZA())}function ri(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function li(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ri,3,1,"div",18),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.photoIdForm.get("id_num").hasError(t.type)&&(i.photoIdForm.get("id_num").dirty||i.photoIdForm.get("id_num").touched))}}function ci(n,a){1&n&&(e.TgZ(0,"span",35),e._uU(1,"*"),e.qZA())}function pi(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.message)}}function di(n,a){if(1&n&&(e.ynx(0),e.YNc(1,pi,3,1,"div",18),e.BQk()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.photoIdForm.get("mem_name").hasError(t.type)&&(i.photoIdForm.get("mem_name").dirty||i.photoIdForm.get("mem_name").touched))}}let z=(()=>{class n{constructor(t,i,o,s){this.globalService=t,this.formApiService=i,this.modalController=o,this.hypervergeApiService=s,this.criticalEvent2=new e.vpe,this.photoIdEvent=new e.vpe,this.submitPhotoIDEvent=new e.vpe,this.category="",this.document_status="",this.uploadSubmit=!1,this.uploadedID=!1,this.inputReadOnly=!0,this.photo_id_status="",this.ocr_error=[],this.validation="",this.uploadPDFFileName="",this.hit_count=1,this.is_document_uploaded=!1,this.validationMessages={category:[{type:"required",message:"Category is required!"}],id_name:[{type:"required",message:"ID Name is required!"}],id_num:[{type:"required",message:"ID Number is required!"}],mem_name:[{type:"required",message:"Member name is required!"}],is_document_uploaded:[{type:"required",message:"Please click on upload button."}]},this.attribute_lang={},this.document_reject_remark="",this.isOptionSelected=!1,this.label="",this.member_name="",this.photo_id_detected=0,this.ocr_enabled=!1,this.ocr_member_name="",this.other_traveller=!1}ngOnInit(){var t,i,o,s,c,d,m,_;this.member_name=this.form_data.name,this.attribute_lang=this.item.value.attribute_lang,this.label=this.item.value.name,this.ocr_enabled=this.item.value.ocr_enabled,this.other_traveller=this.item.value.other_traveller,this.photoIdForm=new r.cw({category:new r.NI("",this.item.value.is_required?[r.kI.required]:[]),id_name:new r.NI(null===(t=this.item.value.value)||void 0===t?void 0:t.id_name,this.item.value.is_required?[r.kI.required]:[]),id_num:new r.NI(null===(i=this.item.value.value)||void 0===i?void 0:i.id_num,this.item.value.is_required?[r.kI.required]:[]),mem_name:new r.NI(null===(o=this.item.value.value)||void 0===o?void 0:o.mem_name,this.item.value.is_required?[r.kI.required]:[]),status:new r.NI(null===(s=this.item.value.value)||void 0===s?void 0:s.status,null),type:new r.NI(null===(c=this.item.value.value)||void 0===c?void 0:c.type,null),filled_manually:new r.NI(null===(d=this.item.value.value)||void 0===d?void 0:d.filled_manually,null),is_document_uploaded:new r.NI(null!==(m=this.item.value.value)&&void 0!==m&&m.id_num?"uploaded":"",[r.kI.required])}),this.validation=this.item.value.validation,this.photo_id_status=this.item.value.is_locked,this.photoIdForm.valueChanges.pipe(C(500)).subscribe(g=>{console.log(g),this.photoIdEvent.emit(g)}),this.globalService.photoIdFilesEvent.subscribe(g=>{g?.forEach((f,b)=>{this.getActualVal(this.item.value.value.type)==f.type&&(console.log(b.toString()+""+f.type),this.imgPath="pdf"==f.path.split(".").pop()?"assets/images/pdf_icon.jpg":f.path,""!=f.path&&(this.uploadPDFFileName=f.path.split("/").pop()),this.photoIdForm.get("category").setValue(f.type),this.document_status=f.status,this.document_reject_remark=f.remark)})}),""!=(null===(_=this.item.value.value)||void 0===_?void 0:_.id_name)&&(this.inputReadOnly=!1)}getActualVal(t){return"Voter ID"==t?"voter-id":"PAN Card"==t?"pan-card":"Driving License"==t?"driving-license":"Adhaar card"==t?"aadhar-card":t}checkValidation(t){return null==this.validation||!!this.validation.includes(t)}takePhoto(){return(0,u.mG)(this,void 0,void 0,function*(){""!=this.photoIdForm.get("category").value?this.fileInput.nativeElement.click():this.globalService.showError("Please select category")})}uploadPhoto(t){const i=t.target.files[0];if(this.extension=i.type,this.uploadPDFFileName=i.name,i.size>=F.m_)this.globalService.showError("Image file should be less than 10 MB");else{var o=new FileReader;o.onload=s=>{let c=s.target.result;this.imgPath=c,this.openImageModal(c),"application/pdf"==this.extension&&(this.imgPath="assets/images/pdf_icon.jpg")},o.readAsDataURL(i),this.selectedFile=i}}openImageModal(t){return(0,u.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:w,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{imgPath:t,type:"application/pdf"==this.extension?"pdf":"image"}}),yield this.imageModal.present(),yield this.imageModal.onDidDismiss().then(i=>{console.log(i),"start_upload"==i.data&&this.uploadDoc()})})}removeFile(){this.selectedFile="",this.imgPath="",this.uploadPDFFileName=""}uploadDoc(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.uploadSubmit=!0,void 0===this.selectedFile)return;const t=new FormData;this.category=this.photoIdForm.get("category").value;var i="";"voter-id"==this.category?i="voterid":"aadhar-card"==this.category?i="id":"driving-license"==this.category?i="dl":"pan-card"==this.category&&(i="pan"),this.contentUploading("Scanning your photo id, this won't take long!"),t.append("countryId","ind"),t.append("documentId",i),t.append("expectedDocumentSide","front"),t.append("image",this.selectedFile);const o=localStorage.getItem("ca_user_id");this.hypervergeApiService.uploadDocument(t,o).subscribe(s=>{if(this.contentUploadModal.dismiss(),console.log(s),"success"==s.status){this.hit_count++,this.photoIdForm.get("is_document_uploaded").setValue(""),"aadhar-card"==this.category?(this.photoIdForm.get("id_name").setValue("Adhaar card"),this.photoIdForm.get("type").setValue("Adhaar card")):"pan-card"==this.category?(this.photoIdForm.get("id_name").setValue("PAN Card"),this.photoIdForm.get("type").setValue("PAN Card")):"voter-id"==this.category?(this.photoIdForm.get("id_name").setValue("Voter ID"),this.photoIdForm.get("type").setValue("Voter ID")):"driving-license"==this.category&&(this.photoIdForm.get("id_name").setValue("Driving License"),this.photoIdForm.get("type").setValue("Driving License")),this.is_document_uploaded=!0,this.extracted_json=s.result,this.ocr_member_name=s.result.details[0].fieldsExtracted.fullName.value,this.photoIdForm.get("id_num").setValue(s.result.details[0].fieldsExtracted.idNumber.value),this.photoIdForm.get("mem_name").setValue(s.result.details[0].fieldsExtracted.fullName.value);var c=[];""!=this.member_name&&""!=this.ocr_member_name&&0==this.other_traveller&&this.member_name.toLowerCase()!=this.ocr_member_name.toLowerCase()&&c.push("The user's registered Full Name is "+this.member_name+", whereas the Full Name listed on their document is "+this.ocr_member_name+". It's important to verify this information for consistency and accuracy."),c.length>0?(this.errorScreen(c,!1),this.is_document_uploaded=!0):(this.is_document_uploaded=!0,this.globalService.showMessage("We've filled out your details. Kindly double-check and you're good to go!")),this.ocr_error.push(c)}},s=>{0==this.photo_id_detected?(this.globalService.showError(s.error.result.error),this.contentUploadModal.dismiss()):(this.photoIdForm.get("filled_manually").setValue(!0),this.globalService.showError("Photo ID Not Detected. Please fill Photo ID details manually.")),this.photo_id_detected++})})}contentUploading(t){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:N,backdropDismiss:!0,mode:"ios",componentProps:{content:t,heading:"Photo ID Details"}}),yield this.contentUploadModal.present()})}errorScreen(t,i){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploadModal=yield this.modalController.create({component:R,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{ocr_error:t,critical_case:i,button_message:"Photo ID",heading:"Oops!"}}),yield this.contentUploadModal.present(),yield this.contentUploadModal.onDidDismiss().then(o=>{"confirm"==o.data?(this.inputReadOnly=!1,this.photoIdForm.get("filled_manually").setValue(!0),this.criticalEvent2.emit(!1),console.log("confirm clicked")):console.log("confirm not clicked")})})}uploadDocuments(){return(0,u.mG)(this,void 0,void 0,function*(){this.contentUploading("Relax! We're securely uploading your photo id to our vault for future reference.");const t=new FormData;t.append("attribute_code",this.item.value.code),t.append("traveller_form_id",this.item.value.traveller_form_id),t.append("type",this.photoIdForm.get("category").value),t.append("name",this.photoIdForm.get("category").value),t.append("ocr_error",JSON.stringify(this.ocr_error)),t.append("extracted_json",JSON.stringify(this.extracted_json)),t.append("hit_count",this.hit_count.toString()),t.append("ocr_transaction_id",A()),t.append("file",this.selectedFile),this.formApiService.uploadDocument(t).subscribe(i=>{this.contentUploadModal.dismiss(),i.success&&(this.is_document_uploaded=!1,this.photoIdForm.get("is_document_uploaded").setValue("uploaded"),this.submitPhotoIDEvent.emit("submit"))},i=>{this.contentUploadModal.dismiss(),this.globalService.showError(i.error.message)})})}uploadDocumentIfNotUploaded(){1==this.is_document_uploaded&&this.uploadDocuments()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q.U),e.Y36(y.$),e.Y36(l.IN),e.Y36(V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-photo-id"]],viewQuery:function(t,i){if(1&t&&e.Gf($t,7),2&t){let o;e.iGM(o=e.CRH())&&(i.fileInput=o.first)}},inputs:{form_data:"form_data",item:"item"},outputs:{criticalEvent2:"criticalEvent2",photoIdEvent:"photoIdEvent",submitPhotoIDEvent:"submitPhotoIDEvent"},decls:59,vars:32,consts:[[3,"formGroup"],["color","danger",4,"ngIf"],[3,"disabled"],[1,"form-group"],["formControlName","category","interface","action-sheet"],["value",""],["value","aadhar-card",4,"ngIf"],["value","pan-card",4,"ngIf"],["value","voter-id",4,"ngIf"],["value","driving-license",4,"ngIf"],[4,"ngFor","ngForOf"],["size","4"],["style","border: 1px #eee solid;padding: 13px;border-radius: 5px;text-align: center;",4,"ngIf"],["type","file","id","fileInput","hidden","","accept","image/png, image/jpg, image/jpeg, application/pdf",3,"change"],["fileInput",""],["style","width:100px;height:100px;object-fit: cover;",3,"src",4,"ngIf"],["size","8"],["type","button","ion-button","",1,"primary-btn-sm",3,"click"],["class","error-message",4,"ngIf"],["class","error-message","style","color:black;width: 100%;",4,"ngIf"],["class","compulsory",4,"ngIf"],["type","text","formControlName","id_name",3,"readonly"],["type","text","formControlName","id_num",3,"readonly"],["type","text","formControlName","mem_name",3,"readonly"],["color","danger"],["value","aadhar-card"],["value","pan-card"],["value","voter-id"],["value","driving-license"],[1,"error-message"],[2,"border","1px #eee solid","padding","13px","border-radius","5px","text-align","center"],["name","document-attach-outline",2,"font-size","40px"],[2,"font-size","10px"],[2,"width","100px","height","100px","object-fit","cover",3,"src"],[1,"error-message",2,"color","black","width","100%"],[1,"compulsory"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Rt,6,1,"ion-card",1),e.TgZ(2,"ion-card",2)(3,"ion-card-content")(4,"h2"),e._uU(5),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3)(8,"ion-label"),e._uU(9),e.qZA(),e.TgZ(10,"ion-select",4)(11,"ion-select-option",5),e._uU(12,"-- Select --"),e.qZA(),e.YNc(13,Vt,2,0,"ion-select-option",6),e.YNc(14,Ht,2,0,"ion-select-option",7),e.YNc(15,zt,2,0,"ion-select-option",8),e.YNc(16,Lt,2,0,"ion-select-option",9),e.qZA()(),e.YNc(17,Xt,2,1,"ng-container",10),e.qZA()(),e.TgZ(18,"ion-card",2)(19,"ion-card-content")(20,"label"),e._uU(21),e.qZA(),e.TgZ(22,"ion-row")(23,"ion-col",11),e.YNc(24,Wt,5,0,"div",12),e.TgZ(25,"input",13,14),e.NdJ("change",function(s){return i.uploadPhoto(s)}),e.qZA(),e.YNc(27,ei,1,1,"img",15),e.qZA(),e.TgZ(28,"ion-col",16)(29,"ion-button",17),e.NdJ("click",function(){return i.takePhoto()}),e._uU(30),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.qZA(),e.TgZ(33,"p"),e._uU(34),e.qZA()()(),e.TgZ(35,"ion-row"),e.YNc(36,ti,3,0,"div",18),e.qZA(),e.TgZ(37,"ion-row"),e.YNc(38,ii,3,1,"div",19),e.qZA()()(),e.TgZ(39,"ion-card",2)(40,"ion-card-content")(41,"div",3)(42,"label"),e._uU(43),e.YNc(44,ni,2,0,"span",20),e.qZA(),e._UZ(45,"ion-input",21),e.YNc(46,ai,2,1,"ng-container",10),e.qZA(),e.TgZ(47,"div",3)(48,"label"),e._uU(49),e.YNc(50,si,2,0,"span",20),e.qZA(),e._UZ(51,"ion-input",22),e.YNc(52,li,2,1,"ng-container",10),e.qZA(),e.TgZ(53,"div",3)(54,"label"),e._uU(55),e.YNc(56,ci,2,0,"span",20),e.qZA(),e._UZ(57,"ion-input",23),e.YNc(58,di,2,1,"ng-container",10),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.photoIdForm),e.xp6(1),e.Q6J("ngIf","rejected"==i.document_status),e.xp6(1),e.Q6J("disabled",i.photo_id_status),e.xp6(3),e.Oqu(i.label),e.xp6(4),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.type),e.xp6(4),e.Q6J("ngIf",i.checkValidation("Adhaar card")||i.checkValidation("Aadhar Card")),e.xp6(1),e.Q6J("ngIf",i.checkValidation("PAN Card")),e.xp6(1),e.Q6J("ngIf",i.checkValidation("Voter ID")),e.xp6(1),e.Q6J("ngIf",i.checkValidation("Driving License")),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.category),e.xp6(1),e.Q6J("disabled",i.photo_id_status),e.xp6(3),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.select_photo),e.xp6(3),e.Q6J("ngIf",!i.imgPath),e.xp6(3),e.Q6J("ngIf",i.imgPath),e.xp6(3),e.Oqu(i.uploadedID?"Update":"Upload"),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.size),e.xp6(2),e.Oqu(null==i.attribute_lang?null:i.attribute_lang.format_both),e.xp6(2),e.Q6J("ngIf",void 0===i.selectedFile&&i.uploadSubmit),e.xp6(2),e.Q6J("ngIf",""!=i.uploadPDFFileName),e.xp6(1),e.Q6J("disabled",i.photo_id_status),e.xp6(4),e.hij("",null==i.attribute_lang?null:i.attribute_lang.id_name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.photo_id_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.id_name),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.id_num," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.photo_id_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.id_num),e.xp6(3),e.hij("",null==i.attribute_lang?null:i.attribute_lang.mem_name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("readonly",i.inputReadOnly||i.photo_id_status),e.xp6(1),e.Q6J("ngForOf",i.validationMessages.mem_name))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.YG,l.PM,l.FN,l.wI,l.gu,l.pK,l.Q$,l.Nd,l.t9,l.n0,l.QI,l.j9,r.sg,r.u],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}ion-card[_ngcontent-%COMP%]{margin:10px 0}.cross_pic_choose[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;border-width:0!important;position:absolute;margin-left:-20px;margin-top:-6px}"]}),n})();function ui(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-select-option",14),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("value",i.showOptionsId(t)),e.xp6(1),e.Oqu(i.showOptionsValue(t))}}function _i(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-select",12),e.NdJ("ionChange",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.changeFieldValue(o))}),e.YNc(4,ui,3,2,"ng-container",13),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2),i=t.$implicit,o=t.index,s=e.oxw();e.xp6(2),e.hij("",s.showItem(i)," "),e.xp6(2),e.Q6J("ngForOf",s.getOptions(o).controls)}}function mi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"input",15),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," ")}}function gi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," ")}}function hi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"textarea",17),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," ")}}function fi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," ")}}function vi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-input",16),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," ")}}function xi(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-file-upload",18),e.NdJ("fileUploadEvent",function(o){e.CHM(t);const s=e.oxw(2).$implicit,c=e.oxw();return e.KtG(c.fileUploadFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",i.getFileItem(t))("is_required",i.is_required)}}function bi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,_i,5,2,"ng-container",11),e.YNc(2,mi,4,1,"ng-container",11),e.YNc(3,gi,4,1,"ng-container",11),e.YNc(4,hi,4,1,"ng-container",11),e.YNc(5,fi,4,1,"ng-container",11),e.YNc(6,vi,4,1,"ng-container",11),e.YNc(7,xi,2,2,"ng-container",11),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf","select"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","date"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","text"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","textarea"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","email"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","phone"==i.getType(t)&&!i.isHiddenField(t)),e.xp6(1),e.Q6J("ngIf","image"==i.getType(t)&&!i.isHiddenField(t))}}function Fi(n,a){if(1&n&&(e.ynx(0,9),e.TgZ(1,"div",10),e.YNc(2,bi,8,7,"ng-container",11),e.qZA(),e.BQk()),2&n){const t=a.$implicit,i=a.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("ngIf","select"==o.getType(t)||"date"==o.getType(t)||"text"==o.getType(t)||"image"==o.getType(t)||"textarea"==o.getType(t))}}function yi(n,a){1&n&&(e.TgZ(0,"ion-button",19),e._uU(1,"Submit"),e.qZA())}let L=(()=>{class n{constructor(t,i,o,s){this.modalCtrl=t,this.fb=i,this.popoverCtrl=o,this.formApiService=s,this.ques=new r.Oe([]),this.loading=!1}ngOnInit(){this.loadMemberForm(),this.questions=new r.cw({question:new r.Oe([])})}loadMemberForm(){this.loading=!0,this.formApiService.getMemberForm(this.language).subscribe(t=>{this.data=t,this.loading=!1,t.forEach((i,o)=>{var s;this.ques=this.questions.get("question"),this.ques.push(this.createQuestion(i)),null===(s=i?.options)||void 0===s||s.forEach(c=>{this.getOptions(o).push(this.createOption(c))})}),this.validateForm()})}validateForm(){this.questions.value.question.forEach(t=>{JSON.parse(t.conditions)?.forEach(o=>{this.questions.value.question.forEach((s,c)=>{s.code==o.field&&(o.value===t.value&&"=="==o.operator||"||"==o.operator&&o.value.includes(t.value)?this.questionForm().at(c).get("is_hidden").setValue(!1):o.value===t.value&&this.questionForm().at(c).get("is_hidden").setValue(!0))})})})}createQuestion(t){return this.fb.group({code:t.code,is_required:t.is_required,is_hidden:t.is_hidden,name:t.name,placeholder:t.placeholder,type:t.type,value:"Add"==this.method_type?"":this.editItem[t.code],validation:t.validation,conditions:JSON.stringify(t.conditions),options:new r.Oe([])})}createOption(t){return this.fb.group({name:t.name,value:t.value})}getOptions(t){return this.questionForm().at(t).get("options")}questionForm(){return this.questions.get("question")}closeModal(){this.modalCtrl.dismiss({status:"close"})}showValue(t){return t.value.value}formatDate(t,i){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let s=o.getDate().toString();1==s.length&&(s="0"+s);const c=o.getFullYear()+"-"+F.j8[o.getMonth()]+"-"+s;return i.value.value=c,c}closePopup(){this.popoverCtrl.dismiss()}showOptionsValue(t){return t.controls.name.value}showOptionsId(t){return t.controls.value.value}showItem(t){return t.value.name}isHiddenField(t){return t.value.is_hidden}getType(t){return t.value.type}onSubmit(){if(this.questions.valid){var t={};console.log(this.questions.value.question),this.questions.value.question.forEach(i=>{t[i.code]=i.value}),this.modalCtrl.dismiss({member:t,status:"added"})}else this.questions.markAllAsTouched()}fileUploadFun(t,i){i.value.value=t.value}getFileItem(t){return t.value.attribute_value_id=this.attribute_value_id,t}changeFieldValue(t){this.questions.markAllAsTouched(),JSON.parse(t.value.conditions)?.forEach(o=>{this.questions.value.question.forEach((s,c)=>{s.code==o.field&&(o.value===t.value.value&&"=="==o.operator||"||"==o.operator&&o.value.includes(t.value.value)?this.questionForm().at(c).get("is_hidden").setValue(!1):this.questionForm().at(c).get("is_hidden").setValue(!0))})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.IN),e.Y36(r.qu),e.Y36(l.Dh),e.Y36(y.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-member"]],decls:10,vars:4,consts:[[1,"ion-padding"],[2,"padding","20px","padding-top","0px"],[2,"text-align","right"],["name","close-circle-outline",1,"close-icon",3,"click"],["align","center"],[3,"formGroup","ngSubmit"],["formArrayName","question",4,"ngFor","ngForOf"],[1,"form-group"],["type","submit","class","primary-btn","ion-button","","size","full",4,"ngIf"],["formArrayName","question"],[1,"form-group",3,"formGroupName"],[4,"ngIf"],["formControlName","value","interface","action-sheet",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"value"],["type","date","formControlName","value"],["formControlName","value","type","text"],["formControlName","value"],[3,"item","is_required","fileUploadEvent"],["type","submit","ion-button","","size","full",1,"primary-btn"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-icon",3),e.NdJ("click",function(){return i.closeModal()}),e.qZA()(),e.TgZ(4,"h5",4),e._uU(5),e.qZA(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.YNc(7,Fi,3,2,"ng-container",6),e.TgZ(8,"div",7),e.YNc(9,yi,2,0,"ion-button",8),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu("Add"==i.method_type?"Add Secondary":"Edit Secondary"),e.xp6(1),e.Q6J("formGroup",i.questions),e.xp6(1),e.Q6J("ngForOf",i.questionForm().controls),e.xp6(2),e.Q6J("ngIf",!i.loading))},dependencies:[p.sg,p.O5,r._Y,r.Fj,r.JJ,r.JL,l.YG,l.W2,l.gu,l.pK,l.Q$,l.t9,l.n0,l.QI,l.j9,r.sg,r.u,r.x0,r.CE,O],styles:["ion-item[_ngcontent-%COMP%]::part(native){border:1px #888888 solid;border-width:1px;padding:0 0 0 5px;border-radius:5px}ion-item[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:0px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:5px}.close-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:10px}h5[_ngcontent-%COMP%]{margin-top:0;padding-top:0;color:#00008b}ion-content[_ngcontent-%COMP%]{min-height:100%}ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px;padding:0 10px!important;min-height:50px}.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-card[_ngcontent-%COMP%]{margin:0}ion-content[_ngcontent-%COMP%]{--background: #fff !important}ion-popover[_ngcontent-%COMP%]{--width: 300px}ion-datetime[_ngcontent-%COMP%]{background:#fff;--background: #fff}"]}),n})();function Zi(n,a){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2,"Corporate Paid Nominations"),e.qZA(),e.TgZ(3,"ion-badge",3),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.corporate_member_allowed)}}function Ti(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=o.$implicit,c=o.index,d=e.oxw();return e.KtG(d.editMember(s,c))}),e._uU(1,"Edit"),e.qZA()}}function Ii(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,s=e.oxw();return e.KtG(s.removeRecord(o))}),e._UZ(1,"ion-icon",11),e.qZA()}}function Ci(n,a){if(1&n&&(e.TgZ(0,"ion-card",4)(1,"ion-card-content")(2,"ion-row")(3,"ion-col",5)(4,"div",6)(5,"b"),e._uU(6,"Name"),e.qZA(),e._uU(7),e.qZA()(),e.TgZ(8,"ion-col",5)(9,"div",6)(10,"b"),e._uU(11,"Relation"),e.qZA(),e._uU(12),e.qZA()()(),e.TgZ(13,"ion-row"),e.YNc(14,Ti,2,0,"ion-button",7),e._uU(15,"\xa0 "),e.YNc(16,Ii,2,0,"ion-button",8),e.qZA()()()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(7),e.hij(": ",t.name,""),e.xp6(5),e.hij(": ",t.relation,""),e.xp6(2),e.Q6J("ngIf",0==i.form_data.secondary_members.length),e.xp6(2),e.Q6J("ngIf",0==i.form_data.secondary_members.length)}}function ki(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addMember())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij("Add ",t.corporate_member_allowed-t.values.length," Nomination")}}function Pi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ki,2,1,"ion-button",12),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.checkMemberButton())}}function wi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addMember())}),e._uU(1,"Add Seft Paid Traveller"),e.qZA()}}function qi(n,a){if(1&n&&(e.ynx(0),e.YNc(1,wi,2,0,"ion-button",12),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.checkMemberButton())}}let Ai=(()=>{class n{constructor(t){this.modalController=t,this.memberEvent=new e.vpe,this.button_name="Loading...",this.values=[],this.disabledAddMemberButton=!1}ngOnInit(){var t,i;this.corporate_member_allowed=Number(this.form_data.total_corporate_paid_nominations_allowed),this.self_paid_member_allowed=Number(this.form_data.total_self_paid_nominations_allowed),this.button_name=this.item.value.name,null!=this.form_data.secondary_members&&(null===(t=this.form_data.secondary_members)||void 0===t?void 0:t.length)>0&&(this.values=null!==(i=this.form_data.secondary_members)&&void 0!==i?i:[])}checkMemberButton(){return this.values.length<=this.corporate_member_allowed+this.self_paid_member_allowed}addMember(){return(0,u.mG)(this,void 0,void 0,function*(){this.createMember=yield this.modalController.create({component:L,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{heading:"Form Submitted",language:this.lang,method_type:"Add",attribute_value_id:this.item.value.attribute_value_id}}),yield this.createMember.present(),yield this.createMember.onDidDismiss().then(t=>{"added"==t.data.status&&this.values.push(t.data.member),this.memberEvent.emit(this.values)})})}editMember(t,i){return(0,u.mG)(this,void 0,void 0,function*(){this.createMember=yield this.modalController.create({component:L,backdropDismiss:!0,mode:"ios",id:"datemodal",componentProps:{heading:"Form Submitted",language:this.lang,method_type:"Edit",editItem:t,is_required:!0,attribute_value_id:this.item.value.attribute_value_id}}),yield this.createMember.present(),yield this.createMember.onDidDismiss().then(o=>{var s;"added"==(null===(s=o?.data)||void 0===s?void 0:s.status)&&this.values.splice(i,1,o.data.member),this.memberEvent.emit(this.values)})})}removeRecord(t){this.values.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member"]],inputs:{lang:"lang",item:"item",form_data:"form_data"},outputs:{memberEvent:"memberEvent"},decls:6,vars:4,consts:[[2,"text-align","center"],[4,"ngIf"],["style","border-radius: 15px;",4,"ngFor","ngForOf"],["color","success"],[2,"border-radius","15px"],["size","6"],[2,"text-align","left","font-size","20px"],["ion-button","","class","primary-btn-sm2",3,"click",4,"ngIf"],["ion-button","","color","danger","size","small","style","margin: 0px;",3,"click",4,"ngIf"],["ion-button","",1,"primary-btn-sm2",3,"click"],["ion-button","","color","danger","size","small",2,"margin","0px",3,"click"],["name","trash","aria-label","Favorite"],["type","button","ion-button","","class","add-member-button",3,"click",4,"ngIf"],["type","button","ion-button","",1,"add-member-button",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ion-list"),e.YNc(2,Zi,5,1,"ion-item",1),e.qZA(),e.YNc(3,Ci,17,4,"ion-card",2),e.YNc(4,Pi,2,1,"ng-container",1),e.YNc(5,qi,2,1,"ng-container",1),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.values.length<i.corporate_member_allowed),e.xp6(1),e.Q6J("ngForOf",i.values),e.xp6(1),e.Q6J("ngIf",i.values.length<i.corporate_member_allowed),e.xp6(1),e.Q6J("ngIf",i.values.length>=i.corporate_member_allowed&&i.values.length<i.corporate_member_allowed+i.self_paid_member_allowed))},dependencies:[p.sg,p.O5,l.yp,l.YG,l.PM,l.FN,l.wI,l.gu,l.Ie,l.Q$,l.q_,l.Nd],styles:[".add-member-button[_ngcontent-%COMP%]{height:60px}.add-member-button[_ngcontent-%COMP%]::part(native){--background: #bde0fe;color:#000;border:1px blue dashed;padding:20px 40px}"]}),n})();var Ui=h(3646);function Ni(n,a){1&n&&(e.TgZ(0,"span",3),e._uU(1,"*"),e.qZA())}function Mi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getSelectedHobbies())}),e._UZ(1,"ion-checkbox",5),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&n){const t=a.index,i=e.oxw();e.Q6J("disabled",i.checkbox_status),e.xp6(1),e.Q6J("formControlName",t),e.xp6(2),e.hij("\xa0\xa0",i.item.value.options[t].name,"")}}let Ji=(()=>{class n{constructor(t){this.fb=t,this.checkboxEvent=new e.vpe,this.attribute_lang={},this.hobbies=this.fb.array([]),this.selectedValues=[],this.checkbox_status=!1,this.validationMessages={checkbox:[{type:"required",message:"Address is required"}]}}ngOnInit(){var t,i;console.log(this.item.value),this.checkboxForm=this.fb.group({checkboxs:this.fb.array([])}),!(null===(t=this.item.value.value)||void 0===t)&&t.split(",")&&(this.selectedValues=null===(i=this.item.value.value)||void 0===i?void 0:i.split(",")),console.log(this.selectedValues),this.hobbies=this.checkboxForm.get("checkboxs"),this.item.value.options.forEach(o=>{let s=!1;this.selectedValues.length>0&&this.selectedValues.includes(o.id.toString())&&(s=!0),this.hobbies.push(this.fb.control(s))}),this.checkbox_status=this.item.value.is_locked}getCheckboxForm(){return this.checkboxForm.get("checkboxs")}getSelectedHobbies(){this.selectedValues=[],this.hobbies.controls.filter((i,o)=>{1==i.value&&this.item.value.options.forEach((s,c)=>{o==c&&this.selectedValues.push(s.id)})}),this.checkboxEvent.emit(JSON.stringify(this.selectedValues))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checkbox"]],inputs:{item:"item",isRequired:"isRequired"},outputs:{checkboxEvent:"checkboxEvent"},decls:7,vars:4,consts:[[3,"formGroup"],["class","compulsory",4,"ngIf"],["formArrayName","checkboxs",3,"disabled","click",4,"ngFor","ngForOf"],[1,"compulsory"],["formArrayName","checkboxs",3,"disabled","click"],[3,"formControlName"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"ion-card")(2,"ion-card-content")(3,"ion-label"),e._uU(4),e.YNc(5,Ni,2,0,"span",1),e.qZA(),e.YNc(6,Mi,4,3,"ion-item",2),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.checkboxForm),e.xp6(4),e.hij("",null==i.item?null:i.item.value.name," "),e.xp6(1),e.Q6J("ngIf",i.item.value.is_required),e.xp6(1),e.Q6J("ngForOf",i.getCheckboxForm().controls))},dependencies:[p.sg,p.O5,r._Y,r.JJ,r.JL,l.PM,l.FN,l.nz,l.Ie,l.Q$,l.w,r.sg,r.u,r.CE],styles:["ion-card[_ngcontent-%COMP%]{margin:10px 0}ion-checkbox[_ngcontent-%COMP%]{--size: 25px;--background-checked: var(--button-bgcolor)}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #ddd}"]}),n})();const Ei=["content"],Oi=["segment"];function Qi(n,a){if(1&n&&(e.TgZ(0,"ion-segment-button",14)(1,"ion-label"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit,i=e.oxw();e.Q6J("value",t),e.xp6(2),e.hij(" ",i.step_names[i.temp_steps[t]],"")}}function Si(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Yi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-select-option",14),e._uU(2),e.qZA(),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("value",i.showOptionsId(t)),e.xp6(1),e.hij("",i.showOptionsValue(t)," ")}}function Di(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Bi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,Si,2,0,"span",18),e.qZA(),e.TgZ(4,"ion-select",19),e.YNc(5,Yi,3,2,"ng-container",10),e.qZA(),e.YNc(6,Di,3,0,"div",20),e.BQk()),2&n){const t=e.oxw(2),i=t.$implicit,o=t.index,s=e.oxw();e.xp6(2),e.hij("",s.showItem(i)," "),e.xp6(1),e.Q6J("ngIf",s.getIsRequired(i)),e.xp6(1),e.Q6J("multiple","multiselect"==s.getType(i)),e.xp6(1),e.Q6J("ngForOf",s.getOptions(o).controls),e.xp6(1),e.Q6J("ngIf",s.checkRequired(i))}}function ji(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Gi(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function $i(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,ji,2,0,"span",18),e.qZA(),e._UZ(4,"input",23),e.YNc(5,Gi,3,0,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",i.checkRequired(t))}}function Ri(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Vi(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Hi(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,Ri,2,0,"span",18),e.qZA(),e._UZ(4,"input",24),e.YNc(5,Vi,3,0,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",i.checkRequired(t))}}function zi(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function Li(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function Ki(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.getValidationMessage(t)," ")}}function Xi(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function Wi(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function en(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,zi,2,0,"span",18),e.qZA(),e._UZ(4,"ion-input",25),e.YNc(5,Li,3,0,"div",20),e.YNc(6,Ki,3,1,"div",20),e.YNc(7,Xi,3,1,"div",20),e.YNc(8,Wi,3,1,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",i.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",i.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",i.checkMin(t)),e.xp6(1),e.Q6J("ngIf",i.checkMax(t))}}function tn(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function nn(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function on(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-item",26),e._uU(2),e.YNc(3,tn,2,0,"span",18),e._UZ(4,"ion-toggle",27),e.qZA(),e.YNc(5,nn,3,0,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij(" ",i.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(1),e.Q6J("enableOnOffLabels",!0),e.xp6(1),e.Q6J("ngIf",i.checkRequired(t))}}function an(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function sn(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function rn(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.getValidationMessage(t)," ")}}function ln(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function cn(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function pn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,an,2,0,"span",18),e.qZA(),e._UZ(4,"ion-textarea",28),e.YNc(5,sn,3,0,"div",20),e.YNc(6,rn,3,1,"div",20),e.YNc(7,ln,3,1,"div",20),e.YNc(8,cn,3,1,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.showItem(t)),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",i.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",i.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",i.checkMin(t)),e.xp6(1),e.Q6J("ngIf",i.checkMax(t))}}function dn(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function un(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function _n(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.getValidationMessage(t)," ")}}function mn(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function gn(n,a){if(1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(3).$implicit,i=e.oxw();e.xp6(2),e.Oqu(i.getValidationMessage(t))}}function hn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,dn,2,0,"span",18),e.qZA(),e._UZ(4,"ion-input",29),e.YNc(5,un,3,0,"div",20),e.YNc(6,_n,3,1,"div",20),e.YNc(7,mn,3,1,"div",20),e.YNc(8,gn,3,1,"div",20),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("",i.showItem(t)," "),e.xp6(1),e.Q6J("ngIf",i.getIsRequired(t)),e.xp6(2),e.Q6J("ngIf",i.checkRequired(t)),e.xp6(1),e.Q6J("ngIf",i.checkPattern(t)),e.xp6(1),e.Q6J("ngIf",i.checkMin(t)),e.xp6(1),e.Q6J("ngIf",i.checkMax(t))}}function fn(n,a){1&n&&(e.TgZ(0,"span",21),e._uU(1,"*"),e.qZA())}function vn(n,a){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",31),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(2),e.Oqu(i.showOptionsValue(t)),e.xp6(1),e.Q6J("value",i.showOptionsId(t))}}function xn(n,a){1&n&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Required"),e.qZA()())}function bn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-label"),e._uU(2),e.YNc(3,fn,2,0,"span",18),e.qZA(),e.TgZ(4,"ion-radio-group",30),e.YNc(5,vn,4,2,"ion-item",10),e.qZA(),e.YNc(6,xn,3,0,"div",20),e.BQk()),2&n){const t=e.oxw(2),i=t.$implicit,o=t.index,s=e.oxw();e.xp6(2),e.hij("",s.showItem(i)," "),e.xp6(1),e.Q6J("ngIf",s.getIsRequired(i)),e.xp6(2),e.Q6J("ngForOf",s.getOptions(o).controls),e.xp6(1),e.Q6J("ngIf",s.checkRequired(i))}}function Fn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-card",17)(2,"ion-card-content"),e.YNc(3,Bi,7,5,"ng-container",9),e.YNc(4,$i,6,3,"ng-container",9),e.YNc(5,Hi,6,3,"ng-container",9),e.YNc(6,en,9,6,"ng-container",9),e.YNc(7,on,6,4,"ng-container",9),e.YNc(8,pn,9,6,"ng-container",9),e.YNc(9,hn,9,6,"ng-container",9),e.YNc(10,bn,7,4,"ng-container",9),e.qZA()(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("disabled",i.getStatus(t)),e.xp6(2),e.Q6J("ngIf","select"==i.getType(t)||"multiselect"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","date"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","datetime"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","text"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","boolean"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","textarea"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","price"==i.getType(t)),e.xp6(1),e.Q6J("ngIf","radio"==i.getType(t))}}function yn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-input-phone",32),e.NdJ("inputPhoneEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.inputPhoneFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function Zn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-input-email",33),e.NdJ("inputEmailEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.inputEmailFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function Tn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-lookup",34),e.NdJ("lookupEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.lookupFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function In(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-checkbox",35),e.NdJ("checkboxEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.checkboxFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function Cn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-file-upload",36),e.NdJ("fileUploadEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.fileUploadFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function kn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-image-upload",37),e.NdJ("imageUploadEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.imageUploadEvent(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("item",t)}}function Pn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-address",38),e.NdJ("addressEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.addressFun(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",t)("isRequired",i.getIsRequired(t))}}function wn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-photo-id",39),e.NdJ("criticalEvent",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.criticalFun(o))})("photoIdEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.photoIdFun(o,s))})("submitPhotoIDEvent",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.submitButtonEvent())})("scrollEvent",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.scrollScreen(o))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",t)("form_data",i.form_data)}}function qn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-passport",40),e.NdJ("criticalEvent",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.criticalFun(o))})("passportEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.passportFun(o,s))})("scrollEvent",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.scrollScreen(o))})("submitPassportEvent",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.submitButtonEvent())}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",t)("form_data",i.form_data)}}function An(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-member",41),e.NdJ("memberEvent",function(o){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.memberEvent(o,s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",t)("lang",i.lang)("form_data",i.form_data)}}function Un(n,a){if(1&n&&(e.ynx(0,15),e.TgZ(1,"div",16),e.YNc(2,Fn,11,9,"ng-container",9),e.YNc(3,yn,2,1,"ng-container",9),e.YNc(4,Zn,2,1,"ng-container",9),e.YNc(5,Tn,2,1,"ng-container",9),e.YNc(6,In,2,1,"ng-container",9),e.YNc(7,Cn,2,1,"ng-container",9),e.YNc(8,kn,2,1,"ng-container",9),e.YNc(9,Pn,2,2,"ng-container",9),e.YNc(10,wn,2,2,"ng-container",9),e.YNc(11,qn,2,2,"ng-container",9),e.YNc(12,An,2,3,"ng-container",9),e.qZA(),e.BQk()),2&n){const t=a.$implicit,i=a.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("ngIf","radio"==o.getType(t)||"price"==o.getType(t)||"select"==o.getType(t)||"multiselect"==o.getType(t)||"date"==o.getType(t)||"datetime"==o.getType(t)||"text"==o.getType(t)||"textarea"==o.getType(t)||"boolean"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","phone"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","email"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","lookup"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","checkbox"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","file"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","image"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","address"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","photo_id"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","passport"==o.getType(t)),e.xp6(1),e.Q6J("ngIf","add_member"==o.getType(t))}}function Nn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content"),e._UZ(2,"div",42)(3,"br"),e.TgZ(4,"div")(5,"ion-checkbox",43),e.NdJ("ionChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.termsChkBoxEvent())}),e.qZA(),e.TgZ(6,"ion-label"),e._uU(7,"\xa0\xa0I do hereby declare that all the above information given by me are true to the best of my knowledge and belief."),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.footerText,e.oJD),e.xp6(3),e.Q6J("checked",t.isTerms)}}function Mn(n,a){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function Jn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"p")(2,"span",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,s=e.oxw();return e.KtG(s.changeStep(o))}),e._uU(3),e.qZA(),e._uU(4,": "),e.qZA(),e.TgZ(5,"ul",45),e.YNc(6,Mn,2,1,"li",10),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(),i=t.$implicit,o=t.index,s=e.oxw();e.xp6(3),e.Oqu(s.step_names[i]),e.xp6(3),e.Q6J("ngForOf",s.getErrors(o+1))}}function En(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Jn,7,2,"ng-container",9),e.BQk()),2&n){const t=a.index,i=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",(null==(o=i.getErrors(t+1))?null:o.length)>0)}}function On(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToNext())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.currentStep==t.total_steps?"Close":"Next")}}function Qn(n,a){if(1&n&&(e.TgZ(0,"ion-button",47),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("disabled",t.criticalError),e.xp6(1),e.Oqu(t.total_steps==t.currentStep?"Complete":"Save & Next")}}function Sn(n,a){1&n&&(e.TgZ(0,"div",48),e._UZ(1,"img",49),e.qZA())}const Yn=[{path:"",component:(()=>{class n{constructor(t,i,o,s,c,d,m,_,g){this.formApiService=t,this.activateRoute=i,this.fb=o,this.alertCtrl=s,this.globalService=c,this.navController=d,this.location=m,this.popoverCtrl=_,this.modalController=g,this.loading=!1,this.ques=new r.Oe([]),this.form_name="",this.footerText="",this.isTerms=!1,this.slides=[],this.isBeginning=!0,this.isEnd=!1,this.times=[],this.currentStep=0,this.formCurrentStep=0,this.total_steps=1,this.step_names={},this.temp_steps=[],this.lang="en",this.errors=[],this.allErrors=[],this.criticalError=!1,this.buttonBgColor="#3880ff",this.bgColor="#e5edfb",this.form_status="",this.step="",this.group_form={},this.id=this.activateRoute.snapshot.params.id,this.lang=this.activateRoute.snapshot.params.lang,this.step=this.activateRoute.snapshot.params.step}ngOnInit(){this.questions=new r.cw({question:new r.Oe([])}),this.getSingleForm(this.step),this.currentStep=0}change(){this.currentSlide=this.slides[1]}getSingleForm(t){return(0,u.mG)(this,void 0,void 0,function*(){this.currentStep!=t&&0==this.loading&&(yield W.A.getLanguageCode(),this.questions.reset(),this.ques.reset(),this.loading=!0,this.formApiService.getSingleForm(this.id,t,this.lang).subscribe(o=>{var s,c,d,m,_;if(this.loading=!1,0==this.slides.length){this.total_steps=(null===(s=o?.data)||void 0===s?void 0:s.total_steps)-1,this.step_names=null===(c=o?.data)||void 0===c?void 0:c.step_names,this.temp_steps=Object.keys(null===(d=o?.data)||void 0===d?void 0:d.step_names);for(var g=0;g<this.temp_steps.length;g++)this.slides.push(g)}this.group_form=o.data.group_form,this.buttonBgColor=o.data.group_form.form_submit_button_color,this.bgColor=o.data.group_form.background_color,document.documentElement.style.setProperty("--button-bgcolor",this.buttonBgColor);const f=localStorage.getItem("selected_language_"+this.id)||"";this.footerText=o.data.group_form.footer[f],this.form_status=o.data.form_status,this.isTerms="started"!=this.form_status,this.form_data=o.data,this.formCurrentStep=o.data.max_step_reached,this.form_name=null===(_=null===(m=o?.data)||void 0===m?void 0:m.group_form)||void 0===_?void 0:_.form_name,o.data.attributes.forEach((b,x)=>{var Z;this.ques=this.questions.get("question"),this.ques.push(this.createQuestion(b)),null===(Z=b.attribute.options)||void 0===Z||Z.forEach(T=>{this.getOptions(x).push(this.createOption(T))})})}))})}goToNext(){this.currentStep==this.total_steps?this.navController.navigateRoot(["/"]):this.changeStep(this.currentStep)}clearFormArray(t){for(;0!==t.length;)t.removeAt(0)}questionForm(){return this.questions.get("question")}createQuestion(t){"passport"==t.attribute.type&&this.globalService.passportFilesEvent.next(t.files),"photo_id"==t.attribute.type&&this.globalService.photoIdFilesEvent.next(t.files),"file"==t.attribute.type&&this.globalService.fileUploadEvent.next(t.files),"image"==t.attribute.type&&this.globalService.imageUploadEvent2.next(t.files);var i=[],o="";t.attribute.is_required&&this.checkFile(t.attribute.type)&&i.push(r.kI.required),"alpha"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.pattern("^[a-zA-Z ]*$")),o="Alpha Characters Only"):"alpha_dash"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.pattern("^[a-zA-Z-]+$")),o="Alpha-Dash Characters Only"):"min"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.minLength(5)),o="Minimum Length (5 characters)"):"max"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.maxLength(20)),o="Maximum Length (20 characters)"):"between"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.maxLength(10)),o="Between (1 and 10)"):"alpha_num"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.pattern("^[a-zA-Z0-9]+$")),o="Alpha-Numeric"):"pan_card"==t.attribute.validation&&this.checkFile(t.attribute.type)?(i.push(r.kI.pattern("^[A-Z]{5}[0-9]{4}[A-Z]$")),o="PAN Number"):"decimal"==t.attribute.validation&&this.checkFile(t.attribute.type)&&(i.push(r.kI.pattern(/^\d+(\.\d{0,2})?$/)),o="Decimal");let s=t.value;return("email"==t.attribute.type||"phone"==t.attribute.type)&&""==s?.label&&(s.label="work"),this.fb.group({name:t.attribute.name,type:t.attribute.type,id:t.attribute.id,value:["add_member"==t.attribute.type?"":s,i],code:t.attribute.code,attribute_value_id:t.attribute_value_id,placeHolder:t.attribute.placeHolder,is_required:t.attribute.is_required,lookup_type:t.attribute.lookup_type,attribute_lang:t.attribute.attribute_lang,options:new r.Oe([]),files:t.attribute.files,is_locked:t?.is_locked,validation:t.attribute.validation,validation_message:o,traveller_form_id:this.id,ocr_enabled:t.attribute.ocr_enabled,other_traveller:t.attribute.other_traveller})}checkFile(t){return"file"!=t&&"phone"!=t&&"email"!=t&&"image"!=t&&"address"!=t&&"photo_id"!=t&&"passport"!=t&&"add_member"!=t&&"checkbox"!=t&&"lookup"!=t}getOptions(t){return this.questionForm().at(t).get("options")}createOption(t){return this.fb.group({id:t.id,name:t.name})}showItem(t){return t.value.name}showValue(t){return t.value.value}showOptionsValue(t){return t.controls.name.value}showOptionsId(t){return t.controls.id.value}getType(t){return t.value.type}getName(t){return t.value.name}getStatus(t){return t.value.is_locked}checkRequired(t){var i,o,s;return null===(s=null===(o=null===(i=t.controls)||void 0===i?void 0:i.value)||void 0===o?void 0:o.errors)||void 0===s?void 0:s.required}checkPattern(t){var i,o,s;return null===(s=null===(o=null===(i=t.controls)||void 0===i?void 0:i.value)||void 0===o?void 0:o.errors)||void 0===s?void 0:s.pattern}checkMin(t){var i,o,s;return null===(s=null===(o=null===(i=t.controls)||void 0===i?void 0:i.value)||void 0===o?void 0:o.errors)||void 0===s?void 0:s.minlength}checkMax(t){var i,o,s;return null===(s=null===(o=null===(i=t.controls)||void 0===i?void 0:i.value)||void 0===o?void 0:o.errors)||void 0===s?void 0:s.maxlength}getIsRequired(t){return t.value.is_required}getValidation(t){return t.value.validation}getValidationMessage(t){return t.value.validation_message}getControlId(t){return t.controls.id.value}addressFun(t,i){i.value.value=t}onSubmit(){var t,i,o,s,c,d,m,_,g,f;this.errors=[],this.allErrors=[];let b={};!(null===(t=this.passportComponent)||void 0===t)&&t.passportForm&&this.passportComponent.uploadDocumentIfNotUploaded(),!(null===(i=this.photoIdComponent)||void 0===i)&&i.photoIdForm&&this.photoIdComponent.uploadDocumentIfNotUploaded(),null===(o=this.photoIdComponent)||void 0===o||!o.photoIdForm||this.photoIdComponent.photoIdForm.valid?null===(s=this.passportComponent)||void 0===s||!s.passportForm||this.passportComponent.passportForm.valid?null===(c=this.addressComponent)||void 0===c||!c.addressForm||this.addressComponent.addressForm.valid?null===(d=this.fileUploadComponent)||void 0===d||!d.fileUploadForm||this.fileUploadComponent.fileUploadForm.valid?null===(m=this.lookupComponent)||void 0===m||!m.lookupForm||this.lookupComponent.lookupForm.valid?null===(_=this.imageUploadComponent)||void 0===_||!_.imageUploadForm||this.imageUploadComponent.imageUploadForm.valid?null===(g=this.inputEmailComponent)||void 0===g||!g.inputEmailForm||this.inputEmailComponent.inputEmailForm.valid?null===(f=this.inputPhoneComponent)||void 0===f||!f.inputPhoneForm||this.inputPhoneComponent.inputPhoneForm.valid?this.questionForm().valid?(this.questions.value.question.forEach(x=>{b[x.code]=this.isJSON(x.value)}),this.currentStep!=this.total_steps||0!=this.isTerms?(b.save="save",this.globalService.presentLoading(),this.formApiService.updateForms(b,this.id,this.temp_steps[this.currentStep]).subscribe(x=>{this.currentStep==this.total_steps?this.finalSave(x):this.changeStep(this.formCurrentStep!=this.temp_steps[this.total_steps-1]?this.currentStep:this.total_steps-1)},x=>{this.errors=x.error.data.errors[this.temp_steps[this.currentStep]],this.allErrors=x.error.data.errors})):this.globalService.showMessage("Please agree on the acknowledgement")):this.questionForm().markAllAsTouched():this.inputPhoneComponent.inputPhoneForm.markAllAsTouched():this.inputEmailComponent.inputEmailForm.markAllAsTouched():this.imageUploadComponent.imageUploadForm.markAllAsTouched():this.lookupComponent.lookupForm.markAllAsTouched():this.fileUploadComponent.fileUploadForm.markAllAsTouched():this.addressComponent.addressForm.markAllAsTouched():this.passportComponent.passportForm.markAllAsTouched():this.photoIdComponent.photoIdForm.markAllAsTouched()}getErrors(t){return this.allErrors[t]}finalSave(t){let i={};t.data[0].attributes.forEach(o=>{i[o.attribute.code]=this.isJSON(o.value)}),i.save="final_save",this.formApiService.updateForms(i,this.id,this.temp_steps[this.currentStep]).subscribe(o=>{this.contentUploading()},o=>{this.errors=o.error.data.errors[this.currentStep],this.allErrors=o.error.data.errors})}isJSON(t){try{return JSON.parse(t)}catch{return t}}segmentChanged(t){this.criticalError=!1,this.clearFormArray(this.questionForm()),this.getSingleForm(this.temp_steps[Number(t.target.value)]),this.currentStep=Number(t.target.value)}changeStep(t){this.errors=[];const i=++t;this.clearFormArray(this.questionForm()),this.segment.value=i.toString()}passportFun(t,i){i.value.value=t}criticalFun(t){this.criticalError=1==t}photoIdFun(t,i){i.value.value=t}fileUploadFun(t,i){i.value.value=t.value}imageUploadEvent(t,i){i.value.value=t.value}checkboxFun(t,i){i.value.value=t}lookupFun(t,i){i.value.value=t}inputEmailFun(t,i){console.log(t),i.value.value=t}inputPhoneFun(t,i){console.log(t),i.value.value=t}memberEvent(t,i){i.value.value=t}exitPage(){this.navController.pop()}back(){this.location.back()}scrollScreen(t){console.log("called fun"),this.content.scrollToBottom(1300)}contentUploading(){return(0,u.mG)(this,void 0,void 0,function*(){this.globalService.completeFormEvent.next("update"),this.formSuccess=yield this.modalController.create({component:Se,backdropDismiss:!0,mode:"ios",componentProps:{heading:"Form Submitted",group_form:this.group_form}}),yield this.formSuccess.present()})}formatDate(t,i){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let s=o.getDate().toString();1==s.length&&(s="0"+s);const c=o.getFullYear()+"-"+F.j8[o.getMonth()]+"-"+s;return i.value.value=c,c}formatDate2(t,i){Array.isArray(t)&&(t=t[0]);const o=new Date(t);let s=o.getDate().toString();1==s.length&&(s="0"+s);let c=o.getHours().toString();1==c.length&&(c="0"+c);let d=o.getMinutes().toString();1==d.length&&(d="0"+d);let m=o.getSeconds().toString();1==m.length&&(m="0"+m);const _=o.getFullYear()+"-"+F.j8[o.getMonth()]+"-"+s+" "+c+":"+d+":"+m;return i.value.value=_,_}closePopup(){this.popoverCtrl.dismiss()}termsChkBoxEvent(){this.isTerms=!this.isTerms}submitButtonEvent(){this.onSubmit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.$),e.Y36(k.gz),e.Y36(r.qu),e.Y36(l.Br),e.Y36(q.U),e.Y36(l.SH),e.Y36(p.Ye),e.Y36(l.Dh),e.Y36(l.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-fill-form"]],viewQuery:function(t,i){if(1&t&&(e.Gf(H,5),e.Gf(z,5),e.Gf(D,5),e.Gf(O,5),e.Gf($,5),e.Gf(B,5),e.Gf(j,5),e.Gf(G,5),e.Gf(Ei,5),e.Gf(Oi,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.passportComponent=o.first),e.iGM(o=e.CRH())&&(i.photoIdComponent=o.first),e.iGM(o=e.CRH())&&(i.addressComponent=o.first),e.iGM(o=e.CRH())&&(i.fileUploadComponent=o.first),e.iGM(o=e.CRH())&&(i.lookupComponent=o.first),e.iGM(o=e.CRH())&&(i.imageUploadComponent=o.first),e.iGM(o=e.CRH())&&(i.inputEmailComponent=o.first),e.iGM(o=e.CRH())&&(i.inputPhoneComponent=o.first),e.iGM(o=e.CRH())&&(i.content=o.first),e.iGM(o=e.CRH())&&(i.segment=o.first)}},decls:27,vars:9,consts:[["content",""],[1,"box-form"],["size-xs","12","size-md","3"],["mode","android","value","0","scrollable","",3,"ionChange"],["segment",""],[3,"value",4,"ngFor","ngForOf"],["size-xs","12","size-md","9"],[3,"formGroup","ngSubmit"],["formArrayName","question",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button","class","primary-btn","ion-button","","size","full",3,"click",4,"ngIf"],["type","submit","class","primary-btn","ion-button","","size","full",3,"disabled",4,"ngIf"],["style","text-align: center",4,"ngIf"],[3,"value"],["formArrayName","question"],[1,"form-group",3,"formGroupName"],[3,"disabled"],["class","compulsory",4,"ngIf"],["formControlName","value",3,"multiple"],["class","error-message",4,"ngIf"],[1,"compulsory"],[1,"error-message"],["type","date","formControlName","value"],["type","datetime-local","formControlName","value"],["formControlName","value","type","text"],["text-wrap","","lines","none"],["slot","end","formControlName","value",1,"custom-spacing",3,"enableOnOffLabels"],["formControlName","value"],["formControlName","value","type","number"],["formControlName","value","v-model","accept"],["slot","start",3,"value"],[3,"item","inputPhoneEvent"],[3,"item","inputEmailEvent"],[3,"item","lookupEvent"],[3,"item","checkboxEvent"],[3,"item","fileUploadEvent"],[3,"item","imageUploadEvent"],[3,"item","isRequired","addressEvent"],[3,"item","form_data","criticalEvent","photoIdEvent","submitPhotoIDEvent","scrollEvent"],[3,"item","form_data","criticalEvent","passportEvent","scrollEvent","submitPassportEvent"],[3,"item","lang","form_data","memberEvent"],[3,"innerHTML"],[3,"checked","ionChange"],[2,"color","blue","text-decoration","underline",3,"click"],[2,"color","red"],["type","button","ion-button","","size","full",1,"primary-btn",3,"click"],["type","submit","ion-button","","size","full",1,"primary-btn",3,"disabled"],[2,"text-align","center"],["src","assets/images/loading.gif","width","300px"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",null,0)(2,"div",1),e._UZ(3,"app-header"),e.TgZ(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-card")(8,"ion-card-content")(9,"ion-segment",3,4),e.NdJ("ionChange",function(s){return i.segmentChanged(s)}),e.YNc(11,Qi,3,2,"ion-segment-button",5),e.qZA()()()(),e.TgZ(12,"ion-col",6)(13,"ion-card")(14,"ion-card-content")(15,"ion-row")(16,"ion-col")(17,"h1"),e._uU(18),e.qZA()()(),e._UZ(19,"hr"),e.TgZ(20,"form",7),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.YNc(21,Un,13,12,"ng-container",8),e.YNc(22,Nn,8,2,"ion-card",9),e.YNc(23,En,2,1,"ng-container",10),e.YNc(24,On,2,1,"ion-button",11),e.YNc(25,Qn,2,2,"ion-button",12),e.qZA(),e.YNc(26,Sn,2,0,"div",13),e.qZA()()()()()()()),2&t&&(e.xp6(11),e.Q6J("ngForOf",i.slides),e.xp6(7),e.Oqu(i.form_name),e.xp6(2),e.Q6J("formGroup",i.questions),e.xp6(1),e.Q6J("ngForOf",i.questionForm().controls),e.xp6(1),e.Q6J("ngIf",!i.loading&&i.total_steps==i.currentStep),e.xp6(1),e.Q6J("ngForOf",i.slides),e.xp6(1),e.Q6J("ngIf",!i.loading&&"completed"==i.form_status),e.xp6(1),e.Q6J("ngIf",!i.loading&&"completed"!=i.form_status),e.xp6(1),e.Q6J("ngIf",i.loading))},dependencies:[p.sg,p.O5,r._Y,r.Fj,r.JJ,r.JL,l.YG,l.PM,l.FN,l.nz,l.wI,l.W2,l.jY,l.pK,l.Ie,l.Q$,l.B7,l.se,l.Nd,l.cJ,l.GO,l.t9,l.n0,l.g2,l.ho,l.w,l.as,l.U5,l.QI,l.j9,r.sg,r.u,r.x0,r.CE,D,z,H,O,$,Ai,Ui.G,Ji,B,j,G],styles:["ion-input[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border:0px gray solid;background-color:#ddd;border-radius:10px;margin-top:5px}.box-form[_ngcontent-%COMP%]{padding:15px;height:100%}ion-segment-button[_ngcontent-%COMP%]{background:white;font-size:12px;font-weight:700}ion-card[_ngcontent-%COMP%]{margin:10px 0}.box-form[_ngcontent-%COMP%]{overflow:scroll;background:var(--bgcolor);padding:15px;height:100%}ion-segment[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;text-align:left;height:auto;width:auto}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{float:left;clear:left;text-align:left;width:100%;max-width:100%}ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--button-bgcolor)}ion-segment-button.md[_ngcontent-%COMP%]{--color: #000;--color-checked: var(--button-bgcolor);--indicator-height: 2px}ion-segment-button.ios[_ngcontent-%COMP%]{--color: var(--button-bgcolor);--color-checked: #fff;--border-radius: 20px}ion-popover[_ngcontent-%COMP%]{--width: 300px}ion-datetime[_ngcontent-%COMP%]{background:#fff;--background: #fff}ion-content[_ngcontent-%COMP%]{--background: #e5edfb !important}"]}),n})()}];let Dn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[k.Bz.forChild(Yn),k.Bz]}),n})(),Bn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})();const jn=[];let Gn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[k.Bz.forChild(jn),k.Bz]}),n})(),K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,Gn]}),n})(),$n=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,J,E,K]}),n})(),Rn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,J,E,K]}),n})(),X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,J,E]}),n})(),Vn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),Hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,X]}),n})(),zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,Hn]}),n})();var Ln=h(4546);let Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),Xn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),Wn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX,J,E]}),n})(),eo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),to=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,r.UX]}),n})(),io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,r.u5,l.Pc,Dn,r.UX,Bn,$n,Rn,X,Vn,Xn,zn,Ln.O,Kn,Wn,eo,to]}),n})()}}]);